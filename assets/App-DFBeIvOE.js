import{r as t,j as e,e as i}from"./index-N6E50agH.js";function a(){var t=["preventDefault","atan2","points","setTransform","4818936GUAkaM","down","update","height","isEraser","createElement","drawImage","type","rgba(255, 255, 255, 1)","3gIygDM","pageY","indexOf","globalAlpha","appVersion","fillRect","source-over","onload","changedTouches","350412zjrTzj","lineWidth","push","forEach","drawingCanvas","addEventListener","7012649koGfGV","arc","9KpdqVB","8qnPbfo","getContext","invScale","Android","pageX","toDataURL","setDrawingCanvasData","movePinch","setPinch","font","5911720ZyDZRi","16px arial.","touchstart","white","canvas","185620PznZds","setContext","shift","clearRect","1071215AaATKb","beginPath","strokeStyle","getElementById","selectedColor","iPhone","165VAzKhD","pCount","81uYTFWX","touchend","maxTouchPoints","sqrt","globalCompositeOperation","length","touchmove","count","fillStyle","getDrawingCanvasData","stroke","sin","src","brushSize","iPad","13802wIgZhz","identifier","width"];return(a=function(){return t})()}function n(t,e){return t-=221,a()[t]}!function(){for(var t=n,e=a();;)try{if(532203===-parseInt(t(275))/1*(parseInt(t(290))/2)+parseInt(t(230))/3*(parseInt(t(263))/4)+parseInt(t(267))/5+parseInt(t(221))/6+-parseInt(t(245))/7*(parseInt(t(248))/8)+parseInt(t(247))/9*(parseInt(t(258))/10)+-parseInt(t(273))/11*(-parseInt(t(239))/12))break;e.push(e.shift())}catch(i){e.push(e.shift())}}();const r=()=>{var t=n;let e=document[t(270)](t(262));if(!e)return;const i={x:0,y:0},a=e[t(249)]("2d");var r=!1,s=!1,o=!0;const h=document[t(226)](t(262)),l=h[t(292)]=512,c=h.height=512,d=h[t(249)]("2d");d[t(283)]=t(261),d[t(235)](0,0,l,c),window[t(243)]=h,window[t(284)]=()=>h[t(253)](),window[t(254)]=e=>{var i=t;const a=new Image;a[i(237)]=()=>{var t=i;d[t(266)](0,0,h[t(292)],h.height),d[t(227)](a,0,0)},a[i(287)]=e};const u=function(e){var i=t;if(void 0===navigator[i(277)]&&(navigator[i(234)].indexOf(i(251))>-1||navigator[i(234)].indexOf(i(272))>-1||navigator.appVersion[i(232)](i(289))>-1)&&(navigator[i(277)]=5),navigator.maxTouchPoints>0)return function(e){var i=t;const a={points:[],x:0,y:0,count:0,w:0,rx:0,ry:0};var n=a,r=a[i(295)];function s(){for(var t=i,e=0;e<n[t(274)];e++)if(-1===r[e].id)return r[e]}function o(t){for(var e=i,a=0;a<n[e(274)];a++)if(r[a].id===t)return r[a]}function h(t,e,a,n){var r=i;void 0!==t&&(a?(t.oy=e[r(252)],t.ox=e[r(231)],t.id=e[r(291)]):(t.ox=t.x,t.oy=t.y),t.x=e[r(252)],t.y=e[r(231)],t[r(222)]=n,!n&&(t.id=-1))}function l(){for(var t=0,e=0;e<n.pCount;e++)-1!==r[e].id&&(0===t&&(n.x=r[e].x,n.y=r[e].y),t+=1);n.count=t}function c(t){var e,a,n=i;if(a=t[n(238)],t[n(228)]===n(260))for(e=0;e<a[n(280)];e++)h(s(),a[e],!0,!0);else if("touchmove"===t.type)for(e=0;e<a[n(280)];e++)h(o(a[e][n(291)]),a[e],!1,!0);else if(t[n(228)]===n(276))for(e=0;e<a.length;e++)h(o(a[e].identifier),a[e],!1,!1);return l(),t[n(293)](),!1}return a[i(274)]=navigator[i(277)],e=void 0===e?document:e,((t,e)=>{for(var i=0;i<t&&!0!==e(i++););})(navigator[i(277)],()=>a.points[i(241)]({x:0,y:0,dx:0,dy:0,down:!1,id:-1})),[i(260),i(281),i(276)][i(242)](t=>e[i(244)](t,c)),a}(e)}(e);if(a[t(257)]=t(259),void 0===u)return;const m=[];function p(){var e=t;const i=window[e(271)]||"black",a=window[e(288)]||8,n=window[e(225)]||!1;for(d[e(279)]=e(236),n?(d.fillStyle=e(229),d[e(269)]=e(229)):(d[e(283)]=i,d[e(269)]=i),d[e(240)]=a;m[e(280)]>0;){const t=m[e(265)]();d[e(268)](),d[e(246)](t.x,t.y,a/2,0,2*Math.PI),d.fill(),d[e(285)]()}}var f=e[t(292)],g=e[t(224)];requestAnimationFrame(function n(d){var v=t;o&&(o=!1,w[t(264)](a)),a.setTransform(1,0,0,1,0,0),a[v(233)]=1,a[v(279)]=v(236),(f!==innerWidth||g!==innerHeight)&&(f=e[v(292)]=innerWidth,g=e[v(224)]=innerHeight),a[v(266)](0,0,f,g),w.apply(),a.fillStyle="black",a[v(233)]=.4,a.fillRect(5,c,l-5,5),a.fillRect(l,5,5,c),a.globalAlpha=1,a.drawImage(h,0,0),a.setTransform(1,0,0,1,0,0),1!==u.count&&!r||s?2===u[v(282)]||s?(m[v(280)]=0,0===u.count?s=!1:s||2!==u[v(282)]?w[v(255)](u[v(295)][0],u.points[1]):(s=!0,w[v(256)](u[v(295)][0],u.points[1]))):(s=!1,r=!1):0===u[v(282)]?(r=!1,p()):(w.toWorld(u,i),m[v(241)]({x:i.x,y:i.y}),r?p():m[v(280)]>8&&(r=!0)),requestAnimationFrame(n)});const w=(()=>{const t=[1,0,0,1,0,0],e=[1,0,0,1,0,0];var i=t,a=e,r=1,s=0;const o={x:0,y:0},h={x:0,y:0};var l,c=0,d=1,u=0,m=0;const p={x:0,y:0};var f=!0;return{canvasDefault(){l[n(296)](1,0,0,1,0,0)},apply(){var t=n;f&&this[t(223)](),l[t(296)](i[0],i[1],i[2],i[3],i[4],i[5])},reset(){r=1,s=0,p.x=0,p.y=0,f=!0},matrix:t,invMatrix:e,update(){var t=n;f=!1,i[3]=i[0]=Math.cos(s)*r,i[2]=-(i[1]=Math[t(286)](s)*r),i[4]=p.x,i[5]=p.y,this[t(250)]=1/r;var e=i[0]*i[3]-i[1]*i[2];a[0]=i[3]/e,a[1]=-i[1]/e,a[2]=-i[2]/e,a[3]=i[0]/e},toWorld(t,e={}){var n,r;return f&&this.update(),n=t.x-i[4],r=t.y-i[5],e.x=n*a[0]+r*a[2],e.y=n*a[1]+r*a[3],e},toScreen(t,e={}){return f&&this[n(223)](),e.x=t.x*i[0]+t.y*i[2]+i[4],e.y=t.x*i[1]+t.y*i[3]+i[5],e},setPinch(t,e){var i=n;f&&this[i(223)](),o.x=t.x,o.y=t.y;var a=e.x-o.x,l=e.y-o.y;c=Math.sqrt(a*a+l*l),m=Math[i(294)](l,a),d=r,u=s,this.toWorld(o,h)},movePinch(t,e,a){var o=n;f&&this.update();var l=e.x-t.x,g=e.y-t.y,w=Math[o(278)](l*l+g*g);if(r=d*(w/c),!a){var v=Math.atan2(g,l);s=u+(v-m)}this[o(223)](),p.x=t.x-h.x*i[0]-h.y*i[2],p.y=t.y-h.x*i[1]-h.y*i[3],f=!0},setContext(t){l=t,f=!0}}})()};var s,o,h,l,c,d,u,m,p=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},f=(t,e,i)=>(p(t,e,"read from private field"),i?i.call(t):e.get(t)),g=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},w=(t,e,i,a)=>(p(t,e,"write to private field"),e.set(t,i),i),v=(t,e,i)=>(p(t,e,"access private method"),i),x=new Uint8Array(8),b=new DataView(x.buffer),y=t=>[(t%256+256)%256],C=t=>(b.setUint16(0,t,!1),[x[0],x[1]]),k=t=>(b.setUint32(0,t,!1),[x[1],x[2],x[3]]),j=t=>(b.setUint32(0,t,!1),[x[0],x[1],x[2],x[3]]),T=t=>(b.setUint32(0,Math.floor(t/2**32),!1),b.setUint32(4,t,!1),[x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7]]),M=t=>(b.setInt16(0,256*t,!1),[x[0],x[1]]),S=t=>(b.setInt32(0,65536*t,!1),[x[0],x[1],x[2],x[3]]),N=t=>(b.setInt32(0,2**30*t,!1),[x[0],x[1],x[2],x[3]]),D=(t,e=!1)=>{let i=Array(t.length).fill(null).map((e,i)=>t.charCodeAt(i));return e&&i.push(0),i},z=t=>t&&t[t.length-1],L=t=>{let e;for(let i of t)(!e||i.presentationTimestamp>e.presentationTimestamp)&&(e=i);return e},E=(t,e,i=!0)=>{let a=t*e;return i?Math.round(a):a},B=t=>{let e=t*(Math.PI/180),i=Math.cos(e),a=Math.sin(e);return[i,a,0,-a,i,0,0,0,1]},W=B(0),O=t=>[S(t[0]),S(t[1]),N(t[2]),S(t[3]),S(t[4]),N(t[5]),S(t[6]),S(t[7]),N(t[8])],A=t=>t?"object"!=typeof t?t:Array.isArray(t)?t.map(A):Object.fromEntries(Object.entries(t).map(([t,e])=>[t,A(e)])):t,R=t=>t>=0&&t<2**32,I=(t,e,i)=>({type:t,contents:e&&new Uint8Array(e.flat(10)),children:i}),P=(t,e,i,a,n)=>I(t,[y(e),k(i),a??[]],n),F=t=>({type:"mdat",largeSize:t}),U=(t,e,i=!1)=>I("moov",null,[H(e,t),...t.map(t=>V(t,e)),i?pt(t):null]),H=(t,e)=>{let i=E(Math.max(0,...e.filter(t=>t.samples.length>0).map(t=>{const e=L(t.samples);return e.presentationTimestamp+e.duration})),Ee),a=Math.max(...e.map(t=>t.id))+1,n=!R(t)||!R(i),r=n?T:j;return P("mvhd",+n,0,[r(t),r(t),j(Ee),r(i),S(1),M(1),Array(10).fill(0),O(W),Array(24).fill(0),j(a)])},V=(t,e)=>I("trak",null,[Y(t,e),X(t,e)]),Y=(t,e)=>{let i,a=L(t.samples),n=E(a?a.presentationTimestamp+a.duration:0,Ee),r=!R(e)||!R(n),s=r?T:j;return i="video"===t.info.type?"number"==typeof t.info.rotation?B(t.info.rotation):t.info.rotation:W,P("tkhd",+r,3,[s(e),s(e),j(t.id),j(0),s(n),Array(8).fill(0),C(0),C(0),M("audio"===t.info.type?1:0),C(0),O(i),S("video"===t.info.type?t.info.width:0),S("video"===t.info.type?t.info.height:0)])},X=(t,e)=>I("mdia",null,[$(t,e),q("video"===t.info.type?"vide":"soun"),G(t)]),$=(t,e)=>{let i=L(t.samples),a=E(i?i.presentationTimestamp+i.duration:0,t.timescale),n=!R(e)||!R(a),r=n?T:j;return P("mdhd",+n,0,[r(e),r(e),j(t.timescale),r(a),C(21956),C(0)])},q=t=>P("hdlr",0,0,[D("mhlr"),D(t),j(0),j(0),j(0),D("mp4-muxer-hdlr",!0)]),G=t=>I("minf",null,["video"===t.info.type?Z():J(),K(),tt(t)]),Z=()=>P("vmhd",0,1,[C(0),C(0),C(0),C(0)]),J=()=>P("smhd",0,0,[C(0),C(0)]),K=()=>I("dinf",null,[Q()]),Q=()=>P("dref",0,0,[j(1)],[_()]),_=()=>P("url ",0,1),tt=t=>{const e=t.compositionTimeOffsetTable.length>1||t.compositionTimeOffsetTable.some(t=>0!==t.sampleCompositionTimeOffset);return I("stbl",null,[et(t),ht(t),lt(t),ct(t),dt(t),ut(t),e?mt(t):null])},et=t=>P("stsd",0,0,[j(1)],["video"===t.info.type?it(Tt[t.info.codec],t):ot(St[t.info.codec],t)]),it=(t,e)=>{return I(t,[Array(6).fill(0),C(1),C(0),C(0),Array(12).fill(0),C(e.info.width),C(e.info.height),j(4718592),j(4718592),j(0),C(1),Array(32).fill(0),C(24),(i=65535,b.setInt16(0,i,!1),[x[0],x[1]])],[Mt[e.info.codec](e),e.info.decoderConfig.colorSpace?st(e):null]);var i},at={bt709:1,bt470bg:5,smpte170m:6},nt={bt709:1,smpte170m:6,"iec61966-2-1":13},rt={rgb:0,bt709:1,bt470bg:5,smpte170m:6},st=t=>I("colr",[D("nclx"),C(at[t.info.decoderConfig.colorSpace.primaries]),C(nt[t.info.decoderConfig.colorSpace.transfer]),C(rt[t.info.decoderConfig.colorSpace.matrix]),y((t.info.decoderConfig.colorSpace.fullRange?1:0)<<7)]),ot=(t,e)=>I(t,[Array(6).fill(0),C(1),C(0),C(0),j(0),C(e.info.numberOfChannels),C(16),C(0),C(0),S(e.info.sampleRate)],[Nt[e.info.codec](e)]),ht=t=>P("stts",0,0,[j(t.timeToSampleTable.length),t.timeToSampleTable.map(t=>[j(t.sampleCount),j(t.sampleDelta)])]),lt=t=>{if(t.samples.every(t=>"key"===t.type))return null;let e=[...t.samples.entries()].filter(([,t])=>"key"===t.type);return P("stss",0,0,[j(e.length),e.map(([t])=>j(t+1))])},ct=t=>P("stsc",0,0,[j(t.compactlyCodedChunkTable.length),t.compactlyCodedChunkTable.map(t=>[j(t.firstChunk),j(t.samplesPerChunk),j(1)])]),dt=t=>P("stsz",0,0,[j(0),j(t.samples.length),t.samples.map(t=>j(t.size))]),ut=t=>t.finalizedChunks.length>0&&z(t.finalizedChunks).offset>=2**32?P("co64",0,0,[j(t.finalizedChunks.length),t.finalizedChunks.map(t=>T(t.offset))]):P("stco",0,0,[j(t.finalizedChunks.length),t.finalizedChunks.map(t=>j(t.offset))]),mt=t=>P("ctts",0,0,[j(t.compositionTimeOffsetTable.length),t.compositionTimeOffsetTable.map(t=>[j(t.sampleCount),j(t.sampleCompositionTimeOffset)])]),pt=t=>I("mvex",null,t.map(ft)),ft=t=>P("trex",0,0,[j(t.id),j(1),j(0),j(0),j(0)]),gt=(t,e)=>I("moof",null,[wt(t),...e.map(xt)]),wt=t=>P("mfhd",0,0,[j(t)]),vt=t=>{let e=0,i=0,a="delta"===t.type;return i|=+a,e|=a?1:2,e<<24|i<<16},xt=t=>I("traf",null,[bt(t),yt(t),Ct(t)]),bt=t=>{let e=0;e|=8,e|=16,e|=32,e|=131072;let i=t.currentChunk.samples[1]??t.currentChunk.samples[0],a={duration:i.timescaleUnitsToNextSample,size:i.size,flags:vt(i)};return P("tfhd",0,131128,[j(t.id),j(a.duration),j(a.size),j(a.flags)])},yt=t=>P("tfdt",1,0,[T(E(t.currentChunk.startTimestamp,t.timescale))]),Ct=t=>{let e=t.currentChunk.samples.map(t=>t.timescaleUnitsToNextSample),i=t.currentChunk.samples.map(t=>t.size),a=t.currentChunk.samples.map(vt),n=t.currentChunk.samples.map(e=>E(e.presentationTimestamp-e.decodeTimestamp,t.timescale)),r=new Set(e),s=new Set(i),o=new Set(a),h=new Set(n),l=2===o.size&&a[0]!==a[1],c=r.size>1,d=s.size>1,u=!l&&o.size>1,m=h.size>1||[...h].some(t=>0!==t),p=0;return p|=1,p|=4*+l,p|=256*+c,p|=512*+d,p|=1024*+u,p|=2048*+m,P("trun",1,p,[j(t.currentChunk.samples.length),j(t.currentChunk.offset-t.currentChunk.moofOffset||0),l?j(a[0]):[],t.currentChunk.samples.map((t,r)=>{return[c?j(e[r]):[],d?j(i[r]):[],u?j(a[r]):[],m?(s=n[r],b.setInt32(0,s,!1),[x[0],x[1],x[2],x[3]]):[]];var s})])},kt=(t,e)=>P("tfra",1,0,[j(t.id),j(63),j(t.finalizedChunks.length),t.finalizedChunks.map(i=>[T(E(i.startTimestamp,t.timescale)),T(i.moofOffset),j(e+1),j(1),j(1)])]),jt=()=>P("mfro",0,0,[j(0)]),Tt={avc:"avc1",hevc:"hvc1",vp9:"vp09",av1:"av01"},Mt={avc:t=>t.info.decoderConfig&&I("avcC",[...new Uint8Array(t.info.decoderConfig.description)]),hevc:t=>t.info.decoderConfig&&I("hvcC",[...new Uint8Array(t.info.decoderConfig.description)]),vp9:t=>{if(!t.info.decoderConfig)return null;let e=t.info.decoderConfig;if(!e.colorSpace)throw new Error("'colorSpace' is required in the decoder config for VP9.");let i=e.codec.split("."),a=Number(i[1]),n=Number(i[2]),r=0+(Number(i[3])<<4)+Number(e.colorSpace.fullRange);return P("vpcC",1,0,[y(a),y(n),y(r),y(2),y(2),y(2),C(0)])},av1:()=>I("av1C",[129,0,0,0])},St={aac:"mp4a",opus:"Opus"},Nt={aac:t=>{let e=new Uint8Array(t.info.decoderConfig.description);return P("esds",0,0,[j(58753152),y(32+e.byteLength),C(1),y(0),j(75530368),y(18+e.byteLength),y(64),y(21),k(0),j(130071),j(130071),j(92307584),y(e.byteLength),...e,j(109084800),y(1),y(2)])},opus:t=>{let e=3840,i=0;const a=t.info.decoderConfig?.description;if(a){if(a.byteLength<18)throw new TypeError("Invalid decoder description provided for Opus; must be at least 18 bytes long.");const t=ArrayBuffer.isView(a)?new DataView(a.buffer,a.byteOffset,a.byteLength):new DataView(a);e=t.getUint16(10,!0),i=t.getInt16(14,!0)}return I("dOps",[y(0),y(t.info.numberOfChannels),C(e),j(t.info.sampleRate),M(i),y(0)])}},Dt=class{},zt=class extends Dt{constructor(){super(...arguments),this.buffer=null}},Lt=class extends Dt{constructor(t){if(super(),this.options=t,"object"!=typeof t)throw new TypeError("StreamTarget requires an options object to be passed to its constructor.");if(t.onData){if("function"!=typeof t.onData)throw new TypeError("options.onData, when provided, must be a function.");if(t.onData.length<2)throw new TypeError("options.onData, when provided, must be a function that takes in at least two arguments (data and position). Ignoring the position argument, which specifies the byte offset at which the data is to be written, can lead to broken outputs.")}if(void 0!==t.chunked&&"boolean"!=typeof t.chunked)throw new TypeError("options.chunked, when provided, must be a boolean.");if(void 0!==t.chunkSize&&(!Number.isInteger(t.chunkSize)||t.chunkSize<1024))throw new TypeError("options.chunkSize, when provided, must be an integer and not smaller than 1024.")}},Et=class extends Dt{constructor(t,e){if(super(),this.stream=t,this.options=e,!(t instanceof FileSystemWritableFileStream))throw new TypeError("FileSystemWritableFileStreamTarget requires a FileSystemWritableFileStream instance.");if(void 0!==e&&"object"!=typeof e)throw new TypeError("FileSystemWritableFileStreamTarget's options, when provided, must be an object.");if(e&&void 0!==e.chunkSize&&(!Number.isInteger(e.chunkSize)||e.chunkSize<=0))throw new TypeError("options.chunkSize, when provided, must be a positive integer")}},Bt=class{constructor(){this.pos=0,g(this,s,new Uint8Array(8)),g(this,o,new DataView(f(this,s).buffer)),this.offsets=new WeakMap}seek(t){this.pos=t}writeU32(t){f(this,o).setUint32(0,t,!1),this.write(f(this,s).subarray(0,4))}writeU64(t){f(this,o).setUint32(0,Math.floor(t/2**32),!1),f(this,o).setUint32(4,t,!1),this.write(f(this,s).subarray(0,8))}writeAscii(t){for(let e=0;e<t.length;e++)f(this,o).setUint8(e%8,t.charCodeAt(e)),e%8==7&&this.write(f(this,s));t.length%8!=0&&this.write(f(this,s).subarray(0,t.length%8))}writeBox(t){if(this.offsets.set(t,this.pos),t.contents&&!t.children)this.writeBoxHeader(t,t.size??t.contents.byteLength+8),this.write(t.contents);else{let e=this.pos;if(this.writeBoxHeader(t,0),t.contents&&this.write(t.contents),t.children)for(let n of t.children)n&&this.writeBox(n);let i=this.pos,a=t.size??i-e;this.seek(e),this.writeBoxHeader(t,a),this.seek(i)}}writeBoxHeader(t,e){this.writeU32(t.largeSize?1:e),this.writeAscii(t.type),t.largeSize&&this.writeU64(e)}measureBoxHeader(t){return 8+(t.largeSize?8:0)}patchBox(t){let e=this.pos;this.seek(this.offsets.get(t)),this.writeBox(t),this.seek(e)}measureBox(t){if(t.contents&&!t.children){return this.measureBoxHeader(t)+t.contents.byteLength}{let e=this.measureBoxHeader(t);if(t.contents&&(e+=t.contents.byteLength),t.children)for(let i of t.children)i&&(e+=this.measureBox(i));return e}}};s=new WeakMap,o=new WeakMap;var Wt=class extends Bt{constructor(t){super(),g(this,u),g(this,h,void 0),g(this,l,new ArrayBuffer(65536)),g(this,c,new Uint8Array(f(this,l))),g(this,d,0),w(this,h,t)}write(t){v(this,u,m).call(this,this.pos+t.byteLength),f(this,c).set(t,this.pos),this.pos+=t.byteLength,w(this,d,Math.max(f(this,d),this.pos))}finalize(){v(this,u,m).call(this,this.pos),f(this,h).buffer=f(this,l).slice(0,Math.max(f(this,d),this.pos))}};h=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakSet,m=function(t){let e=f(this,l).byteLength;for(;e<t;)e*=2;if(e===f(this,l).byteLength)return;let i=new ArrayBuffer(e),a=new Uint8Array(i);a.set(f(this,c),0),w(this,l,i),w(this,c,a)};var Ot,At,Rt,It,Pt,Ft,Ut,Ht,Vt,Yt,Xt,$t,qt,Gt=class extends Bt{constructor(t){super(),g(this,Ft),g(this,Ht),g(this,Yt),g(this,$t),g(this,Ot,void 0),g(this,At,[]),g(this,Rt,void 0),g(this,It,void 0),g(this,Pt,[]),w(this,Ot,t),w(this,Rt,t.options?.chunked??!1),w(this,It,t.options?.chunkSize??16777216)}write(t){f(this,At).push({data:t.slice(),start:this.pos}),this.pos+=t.byteLength}flush(){if(0===f(this,At).length)return;let t=[],e=[...f(this,At)].sort((t,e)=>t.start-e.start);t.push({start:e[0].start,size:e[0].data.byteLength});for(let i=1;i<e.length;i++){let a=t[t.length-1],n=e[i];n.start<=a.start+a.size?a.size=Math.max(a.size,n.start+n.data.byteLength-a.start):t.push({start:n.start,size:n.data.byteLength})}for(let i of t){i.data=new Uint8Array(i.size);for(let t of f(this,At))i.start<=t.start&&t.start<i.start+i.size&&i.data.set(t.data,t.start-i.start);f(this,Rt)?(v(this,Ft,Ut).call(this,i.data,i.start),v(this,$t,qt).call(this)):f(this,Ot).options.onData?.(i.data,i.start)}f(this,At).length=0}finalize(){f(this,Rt)&&v(this,$t,qt).call(this,!0)}};Ot=new WeakMap,At=new WeakMap,Rt=new WeakMap,It=new WeakMap,Pt=new WeakMap,Ft=new WeakSet,Ut=function(t,e){let i=f(this,Pt).findIndex(t=>t.start<=e&&e<t.start+f(this,It));-1===i&&(i=v(this,Yt,Xt).call(this,e));let a=f(this,Pt)[i],n=e-a.start,r=t.subarray(0,Math.min(f(this,It)-n,t.byteLength));a.data.set(r,n);let s={start:n,end:n+r.byteLength};if(v(this,Ht,Vt).call(this,a,s),0===a.written[0].start&&a.written[0].end===f(this,It)&&(a.shouldFlush=!0),f(this,Pt).length>2){for(let t=0;t<f(this,Pt).length-1;t++)f(this,Pt)[t].shouldFlush=!0;v(this,$t,qt).call(this)}r.byteLength<t.byteLength&&v(this,Ft,Ut).call(this,t.subarray(r.byteLength),e+r.byteLength)},Ht=new WeakSet,Vt=function(t,e){let i=0,a=t.written.length-1,n=-1;for(;i<=a;){let r=Math.floor(i+(a-i+1)/2);t.written[r].start<=e.start?(i=r+1,n=r):a=r-1}for(t.written.splice(n+1,0,e),(-1===n||t.written[n].end<e.start)&&n++;n<t.written.length-1&&t.written[n].end>=t.written[n+1].start;)t.written[n].end=Math.max(t.written[n].end,t.written[n+1].end),t.written.splice(n+1,1)},Yt=new WeakSet,Xt=function(t){let e={start:Math.floor(t/f(this,It))*f(this,It),data:new Uint8Array(f(this,It)),written:[],shouldFlush:!1};return f(this,Pt).push(e),f(this,Pt).sort((t,e)=>t.start-e.start),f(this,Pt).indexOf(e)},$t=new WeakSet,qt=function(t=!1){for(let e=0;e<f(this,Pt).length;e++){let i=f(this,Pt)[e];if(i.shouldFlush||t){for(let t of i.written)f(this,Ot).options.onData?.(i.data.subarray(t.start,t.end),i.start+t.start);f(this,Pt).splice(e--,1)}}};var Zt,Jt,Kt,Qt,_t,te,ee,ie,ae,ne,re,se,oe,he,le,ce,de,ue,me,pe,fe,ge,we,ve,xe,be,ye,Ce,ke,je,Te,Me,Se,Ne,De,ze,Le=class extends Gt{constructor(t){super(new Lt({onData:(e,i)=>t.stream.write({type:"write",data:e,position:i}),chunked:!0,chunkSize:t.options?.chunkSize}))}},Ee=1e3,Be=["avc","hevc","vp9","av1"],We=["aac","opus"],Oe=["strict","offset","cross-track-offset"],Ae=class{constructor(t){if(g(this,oe),g(this,le),g(this,de),g(this,me),g(this,fe),g(this,we),g(this,xe),g(this,ye),g(this,ke),g(this,Te),g(this,Se),g(this,De),g(this,Zt,void 0),g(this,Jt,void 0),g(this,Kt,void 0),g(this,Qt,void 0),g(this,_t,null),g(this,te,null),g(this,ee,Math.floor(Date.now()/1e3)+2082844800),g(this,ie,[]),g(this,ae,1),g(this,ne,[]),g(this,re,[]),g(this,se,!1),v(this,oe,he).call(this,t),t.video=A(t.video),t.audio=A(t.audio),t.fastStart=A(t.fastStart),this.target=t.target,w(this,Zt,{firstTimestampBehavior:"strict",...t}),t.target instanceof zt)w(this,Jt,new Wt(t.target));else if(t.target instanceof Lt)w(this,Jt,new Gt(t.target));else{if(!(t.target instanceof Et))throw new Error(`Invalid target: ${t.target}`);w(this,Jt,new Le(t.target))}v(this,me,pe).call(this),v(this,le,ce).call(this)}addVideoChunk(t,e,i,a){if(!(t instanceof EncodedVideoChunk))throw new TypeError("addVideoChunk's first argument (sample) must be of type EncodedVideoChunk.");if(e&&"object"!=typeof e)throw new TypeError("addVideoChunk's second argument (meta), when provided, must be an object.");if(void 0!==i&&(!Number.isFinite(i)||i<0))throw new TypeError("addVideoChunk's third argument (timestamp), when provided, must be a non-negative real number.");if(void 0!==a&&!Number.isFinite(a))throw new TypeError("addVideoChunk's fourth argument (compositionTimeOffset), when provided, must be a real number.");let n=new Uint8Array(t.byteLength);t.copyTo(n),this.addVideoChunkRaw(n,t.type,i??t.timestamp,t.duration,e,a)}addVideoChunkRaw(t,e,i,a,n,r){if(!(t instanceof Uint8Array))throw new TypeError("addVideoChunkRaw's first argument (data) must be an instance of Uint8Array.");if("key"!==e&&"delta"!==e)throw new TypeError("addVideoChunkRaw's second argument (type) must be either 'key' or 'delta'.");if(!Number.isFinite(i)||i<0)throw new TypeError("addVideoChunkRaw's third argument (timestamp) must be a non-negative real number.");if(!Number.isFinite(a)||a<0)throw new TypeError("addVideoChunkRaw's fourth argument (duration) must be a non-negative real number.");if(n&&"object"!=typeof n)throw new TypeError("addVideoChunkRaw's fifth argument (meta), when provided, must be an object.");if(void 0!==r&&!Number.isFinite(r))throw new TypeError("addVideoChunkRaw's sixth argument (compositionTimeOffset), when provided, must be a real number.");if(v(this,De,ze).call(this),!f(this,Zt).video)throw new Error("No video track declared.");if("object"==typeof f(this,Zt).fastStart&&f(this,_t).samples.length===f(this,Zt).fastStart.expectedVideoChunks)throw new Error(`Cannot add more video chunks than specified in 'fastStart' (${f(this,Zt).fastStart.expectedVideoChunks}).`);let s=v(this,we,ve).call(this,f(this,_t),t,e,i,a,n,r);if("fragmented"===f(this,Zt).fastStart&&f(this,te)){for(;f(this,re).length>0&&f(this,re)[0].decodeTimestamp<=s.decodeTimestamp;){let t=f(this,re).shift();v(this,xe,be).call(this,f(this,te),t)}s.decodeTimestamp<=f(this,te).lastDecodeTimestamp?v(this,xe,be).call(this,f(this,_t),s):f(this,ne).push(s)}else v(this,xe,be).call(this,f(this,_t),s)}addAudioChunk(t,e,i){if(!(t instanceof EncodedAudioChunk))throw new TypeError("addAudioChunk's first argument (sample) must be of type EncodedAudioChunk.");if(e&&"object"!=typeof e)throw new TypeError("addAudioChunk's second argument (meta), when provided, must be an object.");if(void 0!==i&&(!Number.isFinite(i)||i<0))throw new TypeError("addAudioChunk's third argument (timestamp), when provided, must be a non-negative real number.");let a=new Uint8Array(t.byteLength);t.copyTo(a),this.addAudioChunkRaw(a,t.type,i??t.timestamp,t.duration,e)}addAudioChunkRaw(t,e,i,a,n){if(!(t instanceof Uint8Array))throw new TypeError("addAudioChunkRaw's first argument (data) must be an instance of Uint8Array.");if("key"!==e&&"delta"!==e)throw new TypeError("addAudioChunkRaw's second argument (type) must be either 'key' or 'delta'.");if(!Number.isFinite(i)||i<0)throw new TypeError("addAudioChunkRaw's third argument (timestamp) must be a non-negative real number.");if(!Number.isFinite(a)||a<0)throw new TypeError("addAudioChunkRaw's fourth argument (duration) must be a non-negative real number.");if(n&&"object"!=typeof n)throw new TypeError("addAudioChunkRaw's fifth argument (meta), when provided, must be an object.");if(v(this,De,ze).call(this),!f(this,Zt).audio)throw new Error("No audio track declared.");if("object"==typeof f(this,Zt).fastStart&&f(this,te).samples.length===f(this,Zt).fastStart.expectedAudioChunks)throw new Error(`Cannot add more audio chunks than specified in 'fastStart' (${f(this,Zt).fastStart.expectedAudioChunks}).`);let r=v(this,we,ve).call(this,f(this,te),t,e,i,a,n);if("fragmented"===f(this,Zt).fastStart&&f(this,_t)){for(;f(this,ne).length>0&&f(this,ne)[0].decodeTimestamp<=r.decodeTimestamp;){let t=f(this,ne).shift();v(this,xe,be).call(this,f(this,_t),t)}r.decodeTimestamp<=f(this,_t).lastDecodeTimestamp?v(this,xe,be).call(this,f(this,te),r):f(this,re).push(r)}else v(this,xe,be).call(this,f(this,te),r)}finalize(){if(f(this,se))throw new Error("Cannot finalize a muxer more than once.");if("fragmented"===f(this,Zt).fastStart){for(let t of f(this,ne))v(this,xe,be).call(this,f(this,_t),t);for(let t of f(this,re))v(this,xe,be).call(this,f(this,te),t);v(this,Te,Me).call(this,!1)}else f(this,_t)&&v(this,ke,je).call(this,f(this,_t)),f(this,te)&&v(this,ke,je).call(this,f(this,te));let t=[f(this,_t),f(this,te)].filter(Boolean);if("in-memory"===f(this,Zt).fastStart){let e;for(let a=0;a<2;a++){let i=U(t,f(this,ee)),a=f(this,Jt).measureBox(i);e=f(this,Jt).measureBox(f(this,Qt));let n=f(this,Jt).pos+a+e;for(let t of f(this,ie)){t.offset=n;for(let{data:i}of t.samples)n+=i.byteLength,e+=i.byteLength}if(n<2**32)break;e>=2**32&&(f(this,Qt).largeSize=!0)}let i=U(t,f(this,ee));f(this,Jt).writeBox(i),f(this,Qt).size=e,f(this,Jt).writeBox(f(this,Qt));for(let t of f(this,ie))for(let e of t.samples)f(this,Jt).write(e.data),e.data=null}else if("fragmented"===f(this,Zt).fastStart){let e=f(this,Jt).pos,i=(t=>I("mfra",null,[...t.map(kt),jt()]))(t);f(this,Jt).writeBox(i);let a=f(this,Jt).pos-e;f(this,Jt).seek(f(this,Jt).pos-4),f(this,Jt).writeU32(a)}else{let e=f(this,Jt).offsets.get(f(this,Qt)),i=f(this,Jt).pos-e;f(this,Qt).size=i,f(this,Qt).largeSize=i>=2**32,f(this,Jt).patchBox(f(this,Qt));let a=U(t,f(this,ee));if("object"==typeof f(this,Zt).fastStart){f(this,Jt).seek(f(this,Kt)),f(this,Jt).writeBox(a);let t=e-f(this,Jt).pos;f(this,Jt).writeBox({type:"free",size:t})}else f(this,Jt).writeBox(a)}v(this,Se,Ne).call(this),f(this,Jt).finalize(),w(this,se,!0)}};Zt=new WeakMap,Jt=new WeakMap,Kt=new WeakMap,Qt=new WeakMap,_t=new WeakMap,te=new WeakMap,ee=new WeakMap,ie=new WeakMap,ae=new WeakMap,ne=new WeakMap,re=new WeakMap,se=new WeakMap,oe=new WeakSet,he=function(t){if("object"!=typeof t)throw new TypeError("The muxer requires an options object to be passed to its constructor.");if(!(t.target instanceof Dt))throw new TypeError("The target must be provided and an instance of Target.");if(t.video){if(!Be.includes(t.video.codec))throw new TypeError(`Unsupported video codec: ${t.video.codec}`);if(!Number.isInteger(t.video.width)||t.video.width<=0)throw new TypeError(`Invalid video width: ${t.video.width}. Must be a positive integer.`);if(!Number.isInteger(t.video.height)||t.video.height<=0)throw new TypeError(`Invalid video height: ${t.video.height}. Must be a positive integer.`);const e=t.video.rotation;if("number"==typeof e&&![0,90,180,270].includes(e))throw new TypeError(`Invalid video rotation: ${e}. Has to be 0, 90, 180 or 270.`);if(Array.isArray(e)&&(9!==e.length||e.some(t=>"number"!=typeof t)))throw new TypeError(`Invalid video transformation matrix: ${e.join()}`);if(void 0!==t.video.frameRate&&(!Number.isInteger(t.video.frameRate)||t.video.frameRate<=0))throw new TypeError(`Invalid video frame rate: ${t.video.frameRate}. Must be a positive integer.`)}if(t.audio){if(!We.includes(t.audio.codec))throw new TypeError(`Unsupported audio codec: ${t.audio.codec}`);if(!Number.isInteger(t.audio.numberOfChannels)||t.audio.numberOfChannels<=0)throw new TypeError(`Invalid number of audio channels: ${t.audio.numberOfChannels}. Must be a positive integer.`);if(!Number.isInteger(t.audio.sampleRate)||t.audio.sampleRate<=0)throw new TypeError(`Invalid audio sample rate: ${t.audio.sampleRate}. Must be a positive integer.`)}if(t.firstTimestampBehavior&&!Oe.includes(t.firstTimestampBehavior))throw new TypeError(`Invalid first timestamp behavior: ${t.firstTimestampBehavior}`);if("object"==typeof t.fastStart){if(t.video){if(void 0===t.fastStart.expectedVideoChunks)throw new TypeError("'fastStart' is an object but is missing property 'expectedVideoChunks'.");if(!Number.isInteger(t.fastStart.expectedVideoChunks)||t.fastStart.expectedVideoChunks<0)throw new TypeError("'expectedVideoChunks' must be a non-negative integer.")}if(t.audio){if(void 0===t.fastStart.expectedAudioChunks)throw new TypeError("'fastStart' is an object but is missing property 'expectedAudioChunks'.");if(!Number.isInteger(t.fastStart.expectedAudioChunks)||t.fastStart.expectedAudioChunks<0)throw new TypeError("'expectedAudioChunks' must be a non-negative integer.")}}else if(![!1,"in-memory","fragmented"].includes(t.fastStart))throw new TypeError("'fastStart' option must be false, 'in-memory', 'fragmented' or an object.");if(void 0!==t.minFragmentDuration&&(!Number.isFinite(t.minFragmentDuration)||t.minFragmentDuration<0))throw new TypeError("'minFragmentDuration' must be a non-negative number.")},le=new WeakSet,ce=function(){var t;if(f(this,Jt).writeBox((t={holdsAvc:"avc"===f(this,Zt).video?.codec,fragmented:"fragmented"===f(this,Zt).fastStart}).fragmented?I("ftyp",[D("iso5"),j(512),D("iso5"),D("iso6"),D("mp41")]):I("ftyp",[D("isom"),j(512),D("isom"),t.holdsAvc?D("avc1"):[],D("mp41")])),w(this,Kt,f(this,Jt).pos),"in-memory"===f(this,Zt).fastStart)w(this,Qt,F(!1));else if("fragmented"===f(this,Zt).fastStart);else{if("object"==typeof f(this,Zt).fastStart){let t=v(this,de,ue).call(this);f(this,Jt).seek(f(this,Jt).pos+t)}w(this,Qt,F(!0)),f(this,Jt).writeBox(f(this,Qt))}v(this,Se,Ne).call(this)},de=new WeakSet,ue=function(){if("object"!=typeof f(this,Zt).fastStart)return;let t=0,e=[f(this,Zt).fastStart.expectedVideoChunks,f(this,Zt).fastStart.expectedAudioChunks];for(let i of e)i&&(t+=8*Math.ceil(2/3*i),t+=4*i,t+=12*Math.ceil(2/3*i),t+=4*i,t+=8*i);return t+=4096,t},me=new WeakSet,pe=function(){if(f(this,Zt).video&&w(this,_t,{id:1,info:{type:"video",codec:f(this,Zt).video.codec,width:f(this,Zt).video.width,height:f(this,Zt).video.height,rotation:f(this,Zt).video.rotation??0,decoderConfig:null},timescale:f(this,Zt).video.frameRate??57600,samples:[],finalizedChunks:[],currentChunk:null,firstDecodeTimestamp:void 0,lastDecodeTimestamp:-1,timeToSampleTable:[],compositionTimeOffsetTable:[],lastTimescaleUnits:null,lastSample:null,compactlyCodedChunkTable:[]}),f(this,Zt).audio&&(w(this,te,{id:f(this,Zt).video?2:1,info:{type:"audio",codec:f(this,Zt).audio.codec,numberOfChannels:f(this,Zt).audio.numberOfChannels,sampleRate:f(this,Zt).audio.sampleRate,decoderConfig:null},timescale:f(this,Zt).audio.sampleRate,samples:[],finalizedChunks:[],currentChunk:null,firstDecodeTimestamp:void 0,lastDecodeTimestamp:-1,timeToSampleTable:[],compositionTimeOffsetTable:[],lastTimescaleUnits:null,lastSample:null,compactlyCodedChunkTable:[]}),"aac"===f(this,Zt).audio.codec)){let t=v(this,fe,ge).call(this,2,f(this,Zt).audio.sampleRate,f(this,Zt).audio.numberOfChannels);f(this,te).info.decoderConfig={codec:f(this,Zt).audio.codec,description:t,numberOfChannels:f(this,Zt).audio.numberOfChannels,sampleRate:f(this,Zt).audio.sampleRate}}},fe=new WeakSet,ge=function(t,e,i){let a=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350].indexOf(e),n=i,r="";r+=t.toString(2).padStart(5,"0"),r+=a.toString(2).padStart(4,"0"),15===a&&(r+=e.toString(2).padStart(24,"0")),r+=n.toString(2).padStart(4,"0");let s=8*Math.ceil(r.length/8);r=r.padEnd(s,"0");let o=new Uint8Array(r.length/8);for(let h=0;h<r.length;h+=8)o[h/8]=parseInt(r.slice(h,h+8),2);return o},we=new WeakSet,ve=function(t,e,i,a,n,r,s){let o=a/1e6,h=(a-(s??0))/1e6,l=n/1e6,c=v(this,ye,Ce).call(this,o,h,t);return o=c.presentationTimestamp,h=c.decodeTimestamp,r?.decoderConfig&&(null===t.info.decoderConfig?t.info.decoderConfig=r.decoderConfig:Object.assign(t.info.decoderConfig,r.decoderConfig)),{presentationTimestamp:o,decodeTimestamp:h,duration:l,data:e,size:e.byteLength,type:i,timescaleUnitsToNextSample:E(l,t.timescale)}},xe=new WeakSet,be=function(t,e){"fragmented"!==f(this,Zt).fastStart&&t.samples.push(e);const i=E(e.presentationTimestamp-e.decodeTimestamp,t.timescale);if(null!==t.lastTimescaleUnits){let a=E(e.decodeTimestamp,t.timescale,!1),n=Math.round(a-t.lastTimescaleUnits);if(t.lastTimescaleUnits+=n,t.lastSample.timescaleUnitsToNextSample=n,"fragmented"!==f(this,Zt).fastStart){let e=z(t.timeToSampleTable);1===e.sampleCount?(e.sampleDelta=n,e.sampleCount++):e.sampleDelta===n?e.sampleCount++:(e.sampleCount--,t.timeToSampleTable.push({sampleCount:2,sampleDelta:n}));const a=z(t.compositionTimeOffsetTable);a.sampleCompositionTimeOffset===i?a.sampleCount++:t.compositionTimeOffsetTable.push({sampleCount:1,sampleCompositionTimeOffset:i})}}else t.lastTimescaleUnits=0,"fragmented"!==f(this,Zt).fastStart&&(t.timeToSampleTable.push({sampleCount:1,sampleDelta:E(e.duration,t.timescale)}),t.compositionTimeOffsetTable.push({sampleCount:1,sampleCompositionTimeOffset:i}));t.lastSample=e;let a=!1;if(t.currentChunk){let i=e.presentationTimestamp-t.currentChunk.startTimestamp;if("fragmented"===f(this,Zt).fastStart){let n=f(this,_t)??f(this,te);const r=f(this,Zt).minFragmentDuration??1;t===n&&"key"===e.type&&i>=r&&(a=!0,v(this,Te,Me).call(this))}else a=i>=.5}else a=!0;a&&(t.currentChunk&&v(this,ke,je).call(this,t),t.currentChunk={startTimestamp:e.presentationTimestamp,samples:[]}),t.currentChunk.samples.push(e)},ye=new WeakSet,Ce=function(t,e,i){const a="strict"===f(this,Zt).firstTimestampBehavior,n=-1===i.lastDecodeTimestamp;if(a&&n&&0!==e)throw new Error(`The first chunk for your media track must have a timestamp of 0 (received DTS=${e}).Non-zero first timestamps are often caused by directly piping frames or audio data from a MediaStreamTrack into the encoder. Their timestamps are typically relative to the age of thedocument, which is probably what you want.\n\nIf you want to offset all timestamps of a track such that the first one is zero, set firstTimestampBehavior: 'offset' in the options.\n`);if("offset"===f(this,Zt).firstTimestampBehavior||"cross-track-offset"===f(this,Zt).firstTimestampBehavior){let a;void 0===i.firstDecodeTimestamp&&(i.firstDecodeTimestamp=e),a="offset"===f(this,Zt).firstTimestampBehavior?i.firstDecodeTimestamp:Math.min(f(this,_t)?.firstDecodeTimestamp??1/0,f(this,te)?.firstDecodeTimestamp??1/0),e-=a,t-=a}if(e<i.lastDecodeTimestamp)throw new Error(`Timestamps must be monotonically increasing (DTS went from ${1e6*i.lastDecodeTimestamp} to ${1e6*e}).`);return i.lastDecodeTimestamp=e,{presentationTimestamp:t,decodeTimestamp:e}},ke=new WeakSet,je=function(t){if("fragmented"===f(this,Zt).fastStart)throw new Error("Can't finalize individual chunks if 'fastStart' is set to 'fragmented'.");if(t.currentChunk)if(t.finalizedChunks.push(t.currentChunk),f(this,ie).push(t.currentChunk),0!==t.compactlyCodedChunkTable.length&&z(t.compactlyCodedChunkTable).samplesPerChunk===t.currentChunk.samples.length||t.compactlyCodedChunkTable.push({firstChunk:t.finalizedChunks.length,samplesPerChunk:t.currentChunk.samples.length}),"in-memory"!==f(this,Zt).fastStart){t.currentChunk.offset=f(this,Jt).pos;for(let e of t.currentChunk.samples)f(this,Jt).write(e.data),e.data=null;v(this,Se,Ne).call(this)}else t.currentChunk.offset=0},Te=new WeakSet,Me=function(t=!0){if("fragmented"!==f(this,Zt).fastStart)throw new Error("Can't finalize a fragment unless 'fastStart' is set to 'fragmented'.");let e=[f(this,_t),f(this,te)].filter(t=>t&&t.currentChunk);if(0===e.length)return;let i=(a=this,n=ae,{set _(t){w(a,n,t)},get _(){return f(a,n,r)}})._++;var a,n,r;if(1===i){let t=U(e,f(this,ee),!0);f(this,Jt).writeBox(t)}let s=f(this,Jt).pos,o=gt(i,e);f(this,Jt).writeBox(o);{let t=F(!1),i=0;for(let n of e)for(let t of n.currentChunk.samples)i+=t.size;let a=f(this,Jt).measureBox(t)+i;a>=2**32&&(t.largeSize=!0,a=f(this,Jt).measureBox(t)+i),t.size=a,f(this,Jt).writeBox(t)}for(let c of e){c.currentChunk.offset=f(this,Jt).pos,c.currentChunk.moofOffset=s;for(let t of c.currentChunk.samples)f(this,Jt).write(t.data),t.data=null}let h=f(this,Jt).pos;f(this,Jt).seek(f(this,Jt).offsets.get(o));let l=gt(i,e);f(this,Jt).writeBox(l),f(this,Jt).seek(h);for(let c of e)c.finalizedChunks.push(c.currentChunk),f(this,ie).push(c.currentChunk),c.currentChunk=null;t&&v(this,Se,Ne).call(this)},Se=new WeakSet,Ne=function(){f(this,Jt)instanceof Gt&&f(this,Jt).flush()},De=new WeakSet,ze=function(){if(f(this,se))throw new Error("Cannot add new video or audio chunks after the file has been finalized.")};const Re=({frames:i,clearFrames:a,fps:n=10,width:r=512,height:s=512})=>{const[o,h]=t.useState(!1),l=async()=>{if(!i.length)return;if(!("VideoEncoder"in window))return void alert("WebCodecs not supported in this browser (Chrome 94+ required)");h(!0);let t=null;try{if(t=await async function(t,e,i,a){return new Promise(async(n,r)=>{const s=new Ae({fastStart:"in-memory",target:new zt,video:{codec:"avc",width:i,height:a}}),o=new OffscreenCanvas(i,a),h=o.getContext("2d",{willReadFrequently:!0});if(!h)return void r(new Error("Could not get 2D context"));const l=new VideoEncoder({output:(t,e)=>{s.addVideoChunk(t,e)},error:t=>{r(new Error(`Encoder error: ${t.message}`))}});await l.configure({codec:"avc1.42001e",width:i,height:a,bitrate:2e6,framerate:e});const c=[];for(const e of t)try{const t=new Image;t.src=e,await t.decode();const n=await createImageBitmap(t,{resizeWidth:i,resizeHeight:a,resizeQuality:"high"});c.push(n)}catch(u){return void r(new Error(`Failed to load frame: ${u}`))}for(let t=0;t<c.length;t++){h.clearRect(0,0,i,a),h.drawImage(c[t],0,0,i,a);const n=new VideoFrame(o,{timestamp:Math.round(1e6*t/e),duration:Math.round(1e6/e)});try{l.encode(n)}finally{n.close()}t%5==0&&await new Promise(t=>setTimeout(t,0))}await l.flush(),s.finalize();let{buffer:d}=s.target;n(new Blob([d],{type:"video/mp4"})),c.forEach(t=>t.close())})}(i,n,r,s),t){const e=URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download="animation.mp4",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(e),a?.()}}catch(e){alert("Failed to encode video. Check console for details.")}finally{h(!1)}};return t.useEffect(()=>{l()},[]),e.jsx("button",{className:"z-100 relative",onClick:l,disabled:o||!i.length,children:o?"Encoding...":"Download MP4"})};const Ie=({isOpen:i,onClose:a,onLoadFrames:n,currentFrameCount:r})=>{const[s,o]=t.useState([]),[h,l]=t.useState([]),[c,d]=t.useState(!1),[u,m]=t.useState(!0),p=t.useRef(null);if(!i)return null;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",onDragOver:t=>{t.preventDefault(),t.stopPropagation()},onDrop:t=>{if(t.preventDefault(),t.stopPropagation(),t.dataTransfer.files){const e=Array.from(t.dataTransfer.files).filter(t=>t.type.startsWith("image/")||t.name.match(/\.(png|jpg|jpeg|gif|bmp|webp)$/i));o(e);const i=e.map(t=>URL.createObjectURL(t));l(i)}},children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Load Frames"}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white","aria-label":"Close",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-gray-300 mb-2",children:"Select image files to load as animation frames. Supported formats: PNG, JPG, JPEG, GIF, BMP, WebP."}),e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("input",{type:"checkbox",id:"autoCreate",checked:u,onChange:t=>m(t.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"autoCreate",className:"text-gray-300",children:"Auto-create frames from selected files"})]})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center cursor-pointer mb-4 "+(s.length>0?"bg-gray-700":"bg-gray-900"),onClick:()=>p.current?.click(),children:[e.jsx("input",{type:"file",ref:p,onChange:t=>{if(t.target.files){const e=Array.from(t.target.files).filter(t=>t.type.startsWith("image/")||t.name.match(/\.(png|jpg|jpeg|gif|bmp|webp)$/i));o(e);const i=e.map(t=>URL.createObjectURL(t));l(i)}},className:"hidden",multiple:!0,accept:"image/*"}),0===s.length?e.jsxs("div",{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("p",{className:"mt-2 text-gray-400",children:"Click or drag and drop image files here"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Supports PNG, JPG, JPEG, GIF, BMP, WebP"})]}):e.jsxs("div",{children:[e.jsxs("p",{className:"text-white mb-2",children:[s.length," file",1!==s.length?"s":""," selected"]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Click to select more files"})]})]}),h.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Preview"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2 max-h-60 overflow-y-auto",children:h.map((t,i)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:t,alt:`Preview ${i+1}`,className:"w-full h-24 object-contain bg-gray-200 rounded"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"text-white text-xs",children:i+1})})]},i))})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{onClick:async()=>{if(0!==s.length){if(r>0){if(!window.confirm(`This will replace your current ${r} frame(s) with ${s.length} new frame(s). Are you sure you want to continue?`))return}d(!0);try{const t=await Promise.all(s.map(t=>new Promise((e,i)=>{const a=new FileReader;a.onload=()=>e(a.result),a.onerror=()=>i(a.error),a.readAsDataURL(t)})));n(t),a()}catch(t){alert("Error loading frames. Please try again.")}finally{d(!1)}}else alert("Please select at least one image file.")},disabled:c||0===s.length,className:"px-4 py-2 rounded-lg transition-colors "+(c||0===s.length?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),children:c?"Loading...":`Load ${s.length} Frame${1!==s.length?"s":""}`})]})]})})})};
/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function Pe(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,a)}return i}function Fe(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Pe(Object(i),!0).forEach(function(e){Ye(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Pe(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function Ue(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,e);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==typeof e?e:e+""}function He(t){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},He(t)}function Ve(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Ue(a.key),a)}}function Ye(t,e,i){return(e=Ue(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Xe(t){return function(t){if(Array.isArray(t))return $e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return $e(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return $e(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}var qe="undefined"!=typeof window&&void 0!==window.document,Ge=qe?window:{},Ze=!(!qe||!Ge.document.documentElement)&&"ontouchstart"in Ge.document.documentElement,Je=!!qe&&"PointerEvent"in Ge,Ke="cropper",Qe="all",_e="crop",ti="move",ei="zoom",ii="e",ai="w",ni="s",ri="n",si="ne",oi="nw",hi="se",li="sw",ci="".concat(Ke,"-crop"),di="".concat(Ke,"-disabled"),ui="".concat(Ke,"-hidden"),mi="".concat(Ke,"-hide"),pi="".concat(Ke,"-invisible"),fi="".concat(Ke,"-modal"),gi="".concat(Ke,"-move"),wi="".concat(Ke,"Action"),vi="".concat(Ke,"Preview"),xi="crop",bi="move",yi="none",Ci="crop",ki="cropend",ji="cropmove",Ti="cropstart",Mi="dblclick",Si=Je?"pointerdown":Ze?"touchstart":"mousedown",Ni=Je?"pointermove":Ze?"touchmove":"mousemove",Di=Je?"pointerup pointercancel":Ze?"touchend touchcancel":"mouseup",zi="ready",Li="resize",Ei="wheel",Bi="zoom",Wi="image/jpeg",Oi=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Ai=/^data:/,Ri=/^data:image\/jpeg;base64,/,Ii=/^img|canvas$/i,Pi={viewMode:0,dragMode:xi,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Fi=Number.isNaN||Ge.isNaN;function Ui(t){return"number"==typeof t&&!Fi(t)}var Hi=function(t){return t>0&&t<1/0};function Vi(t){return void 0===t}function Yi(t){return"object"===He(t)&&null!==t}var Xi=Object.prototype.hasOwnProperty;function $i(t){if(!Yi(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&Xi.call(i,"isPrototypeOf")}catch(a){return!1}}function qi(t){return"function"==typeof t}var Gi=Array.prototype.slice;function Zi(t){return Array.from?Array.from(t):Gi.call(t)}function Ji(t,e){return t&&qi(e)&&(Array.isArray(t)||Ui(t.length)?Zi(t).forEach(function(i,a){e.call(t,i,a,t)}):Yi(t)&&Object.keys(t).forEach(function(i){e.call(t,t[i],i,t)})),t}var Ki=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];return Yi(t)&&i.length>0&&i.forEach(function(e){Yi(e)&&Object.keys(e).forEach(function(i){t[i]=e[i]})}),t},Qi=/\.\d*(?:0|9){12}\d*$/;function _i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return Qi.test(t)?Math.round(t*e)/e:t}var ta=/^width|height|left|top|marginLeft|marginTop$/;function ea(t,e){var i=t.style;Ji(e,function(t,e){ta.test(e)&&Ui(t)&&(t="".concat(t,"px")),i[e]=t})}function ia(t,e){if(e)if(Ui(t.length))Ji(t,function(t){ia(t,e)});else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function aa(t,e){e&&(Ui(t.length)?Ji(t,function(t){aa(t,e)}):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function na(t,e,i){e&&(Ui(t.length)?Ji(t,function(t){na(t,e,i)}):i?ia(t,e):aa(t,e))}var ra=/([a-z\d])([A-Z])/g;function sa(t){return t.replace(ra,"$1-$2").toLowerCase()}function oa(t,e){return Yi(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(sa(e)))}function ha(t,e,i){Yi(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(sa(e)),i)}var la=/\s\s*/,ca=function(){var t=!1;if(qe){var e=!1,i=function(){},a=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});Ge.addEventListener("test",i,a),Ge.removeEventListener("test",i,a)}return t}();function da(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i;e.trim().split(la).forEach(function(e){if(!ca){var r=t.listeners;r&&r[e]&&r[e][i]&&(n=r[e][i],delete r[e][i],0===Object.keys(r[e]).length&&delete r[e],0===Object.keys(r).length&&delete t.listeners)}t.removeEventListener(e,n,a)})}function ua(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i;e.trim().split(la).forEach(function(e){if(a.once&&!ca){var r=t.listeners,s=void 0===r?{}:r;n=function(){delete s[e][i],t.removeEventListener(e,n,a);for(var r=arguments.length,o=new Array(r),h=0;h<r;h++)o[h]=arguments[h];i.apply(t,o)},s[e]||(s[e]={}),s[e][i]&&t.removeEventListener(e,s[e][i],a),s[e][i]=n,t.listeners=s}t.addEventListener(e,n,a)})}function ma(t,e,i){var a;return qi(Event)&&qi(CustomEvent)?a=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(a=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(a)}function pa(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var fa=Ge.location,ga=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function wa(t){var e=t.match(ga);return null!==e&&(e[1]!==fa.protocol||e[2]!==fa.hostname||e[3]!==fa.port)}function va(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function xa(t){var e=t.rotate,i=t.scaleX,a=t.scaleY,n=t.translateX,r=t.translateY,s=[];Ui(n)&&0!==n&&s.push("translateX(".concat(n,"px)")),Ui(r)&&0!==r&&s.push("translateY(".concat(r,"px)")),Ui(e)&&0!==e&&s.push("rotate(".concat(e,"deg)")),Ui(i)&&1!==i&&s.push("scaleX(".concat(i,")")),Ui(a)&&1!==a&&s.push("scaleY(".concat(a,")"));var o=s.length?s.join(" "):"none";return{WebkitTransform:o,msTransform:o,transform:o}}function ba(t,e){var i=t.pageX,a=t.pageY,n={endX:i,endY:a};return e?n:Fe({startX:i,startY:a},n)}function ya(t){var e=t.aspectRatio,i=t.height,a=t.width,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",r=Hi(a),s=Hi(i);if(r&&s){var o=i*e;"contain"===n&&o>a||"cover"===n&&o<a?i=a/e:a=i*e}else r?i=a/e:s&&(a=i*e);return{width:a,height:i}}var Ca=String.fromCharCode;var ka=/^data:.*,/;function ja(t){var e,i=new DataView(t);try{var a,n,r;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var s=i.byteLength,o=2;o+1<s;){if(255===i.getUint8(o)&&225===i.getUint8(o+1)){n=o;break}o+=1}if(n){var h=n+10;if("Exif"===function(t,e,i){var a="";i+=e;for(var n=e;n<i;n+=1)a+=Ca(t.getUint8(n));return a}(i,n+4,4)){var l=i.getUint16(h);if(((a=18761===l)||19789===l)&&42===i.getUint16(h+2,a)){var c=i.getUint32(h+4,a);c>=8&&(r=h+c)}}}if(r){var d,u,m=i.getUint16(r,a);for(u=0;u<m;u+=1)if(d=r+12*u+2,274===i.getUint16(d,a)){d+=8,e=i.getUint16(d,a),i.setUint16(d,1,a);break}}}catch(p){e=1}return e}var Ta={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,a=this.cropper,n=Number(e.minContainerWidth),r=Number(e.minContainerHeight);ia(a,ui),aa(t,ui);var s={width:Math.max(i.offsetWidth,n>=0?n:200),height:Math.max(i.offsetHeight,r>=0?r:100)};this.containerData=s,ea(a,{width:s.width,height:s.height}),ia(t,ui),aa(a,ui)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,a=Math.abs(e.rotate)%180==90,n=a?e.naturalHeight:e.naturalWidth,r=a?e.naturalWidth:e.naturalHeight,s=n/r,o=t.width,h=t.height;t.height*s>t.width?3===i?o=t.height*s:h=t.width/s:3===i?h=t.width/s:o=t.height*s;var l={aspectRatio:s,naturalWidth:n,naturalHeight:r,width:o,height:h};this.canvasData=l,this.limited=1===i||2===i,this.limitCanvas(!0,!0),l.width=Math.min(Math.max(l.width,l.minWidth),l.maxWidth),l.height=Math.min(Math.max(l.height,l.minHeight),l.maxHeight),l.left=(t.width-l.width)/2,l.top=(t.height-l.height)/2,l.oldLeft=l.left,l.oldTop=l.top,this.initialCanvasData=Ki({},l)},limitCanvas:function(t,e){var i=this.options,a=this.containerData,n=this.canvasData,r=this.cropBoxData,s=i.viewMode,o=n.aspectRatio,h=this.cropped&&r;if(t){var l=Number(i.minCanvasWidth)||0,c=Number(i.minCanvasHeight)||0;s>1?(l=Math.max(l,a.width),c=Math.max(c,a.height),3===s&&(c*o>l?l=c*o:c=l/o)):s>0&&(l?l=Math.max(l,h?r.width:0):c?c=Math.max(c,h?r.height:0):h&&(l=r.width,(c=r.height)*o>l?l=c*o:c=l/o));var d=ya({aspectRatio:o,width:l,height:c});l=d.width,c=d.height,n.minWidth=l,n.minHeight=c,n.maxWidth=1/0,n.maxHeight=1/0}if(e)if(s>(h?0:1)){var u=a.width-n.width,m=a.height-n.height;n.minLeft=Math.min(0,u),n.minTop=Math.min(0,m),n.maxLeft=Math.max(0,u),n.maxTop=Math.max(0,m),h&&this.limited&&(n.minLeft=Math.min(r.left,r.left+(r.width-n.width)),n.minTop=Math.min(r.top,r.top+(r.height-n.height)),n.maxLeft=r.left,n.maxTop=r.top,2===s&&(n.width>=a.width&&(n.minLeft=Math.min(0,u),n.maxLeft=Math.max(0,u)),n.height>=a.height&&(n.minTop=Math.min(0,m),n.maxTop=Math.max(0,m))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=a.width,n.maxTop=a.height},renderCanvas:function(t,e){var i=this.canvasData,a=this.imageData;if(e){var n=function(t){var e=t.width,i=t.height,a=t.degree;if(90==(a=Math.abs(a)%180))return{width:i,height:e};var n=a%90*Math.PI/180,r=Math.sin(n),s=Math.cos(n),o=e*s+i*r,h=e*r+i*s;return a>90?{width:h,height:o}:{width:o,height:h}}({width:a.naturalWidth*Math.abs(a.scaleX||1),height:a.naturalHeight*Math.abs(a.scaleY||1),degree:a.rotate||0}),r=n.width,s=n.height,o=i.width*(r/i.naturalWidth),h=i.height*(s/i.naturalHeight);i.left-=(o-i.width)/2,i.top-=(h-i.height)/2,i.width=o,i.height=h,i.aspectRatio=r/s,i.naturalWidth=r,i.naturalHeight=s,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,ea(this.canvas,Ki({width:i.width,height:i.height},xa({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,a=i.naturalWidth*(e.width/e.naturalWidth),n=i.naturalHeight*(e.height/e.naturalHeight);Ki(i,{width:a,height:n,left:(e.width-a)/2,top:(e.height-n)/2}),ea(this.image,Ki({width:i.width,height:i.height},xa(Ki({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,a=Number(t.autoCropArea)||.8,n={width:e.width,height:e.height};i&&(e.height*i>e.width?n.height=n.width/i:n.width=n.height*i),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*a),n.height=Math.max(n.minHeight,n.height*a),n.left=e.left+(e.width-n.width)/2,n.top=e.top+(e.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=Ki({},n)},limitCropBox:function(t,e){var i=this.options,a=this.containerData,n=this.canvasData,r=this.cropBoxData,s=this.limited,o=i.aspectRatio;if(t){var h=Number(i.minCropBoxWidth)||0,l=Number(i.minCropBoxHeight)||0,c=s?Math.min(a.width,n.width,n.width+n.left,a.width-n.left):a.width,d=s?Math.min(a.height,n.height,n.height+n.top,a.height-n.top):a.height;h=Math.min(h,a.width),l=Math.min(l,a.height),o&&(h&&l?l*o>h?l=h/o:h=l*o:h?l=h/o:l&&(h=l*o),d*o>c?d=c/o:c=d*o),r.minWidth=Math.min(h,c),r.minHeight=Math.min(l,d),r.maxWidth=c,r.maxHeight=d}e&&(s?(r.minLeft=Math.max(0,n.left),r.minTop=Math.max(0,n.top),r.maxLeft=Math.min(a.width,n.left+n.width)-r.width,r.maxTop=Math.min(a.height,n.top+n.height)-r.height):(r.minLeft=0,r.minTop=0,r.maxLeft=a.width-r.width,r.maxTop=a.height-r.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&ha(this.face,wi,i.width>=e.width&&i.height>=e.height?ti:Qe),ea(this.cropBox,Ki({width:i.width,height:i.height},xa({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),ma(this.element,Ci,this.getData())}},Ma={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,a=e?this.crossOriginUrl:this.url,n=t.alt||"The image to preview",r=document.createElement("img");if(e&&(r.crossOrigin=e),r.src=a,r.alt=n,this.viewBox.appendChild(r),this.viewBoxImage=r,i){var s=i;"string"==typeof i?s=t.ownerDocument.querySelectorAll(i):i.querySelector&&(s=[i]),this.previews=s,Ji(s,function(t){var i=document.createElement("img");ha(t,vi,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(i.crossOrigin=e),i.src=a,i.alt=n,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(i)})}},resetPreview:function(){Ji(this.previews,function(t){var e=oa(t,vi);ea(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(Yi(t[e]))try{delete t[e]}catch(i){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(i){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(sa(e)))}(t,vi)})},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,a=i.width,n=i.height,r=t.width,s=t.height,o=i.left-e.left-t.left,h=i.top-e.top-t.top;this.cropped&&!this.disabled&&(ea(this.viewBoxImage,Ki({width:r,height:s},xa(Ki({translateX:-o,translateY:-h},t)))),Ji(this.previews,function(e){var i=oa(e,vi),l=i.width,c=i.height,d=l,u=c,m=1;a&&(u=n*(m=l/a)),n&&u>c&&(d=a*(m=c/n),u=c),ea(e,{width:d,height:u}),ea(e.getElementsByTagName("img")[0],Ki({width:r*m,height:s*m},xa(Ki({translateX:-o*m,translateY:-h*m},t))))}))}},Sa={bind:function(){var t=this.element,e=this.options,i=this.cropper;qi(e.cropstart)&&ua(t,Ti,e.cropstart),qi(e.cropmove)&&ua(t,ji,e.cropmove),qi(e.cropend)&&ua(t,ki,e.cropend),qi(e.crop)&&ua(t,Ci,e.crop),qi(e.zoom)&&ua(t,Bi,e.zoom),ua(i,Si,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&ua(i,Ei,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&ua(i,Mi,this.onDblclick=this.dblclick.bind(this)),ua(t.ownerDocument,Ni,this.onCropMove=this.cropMove.bind(this)),ua(t.ownerDocument,Di,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&ua(window,Li,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;qi(e.cropstart)&&da(t,Ti,e.cropstart),qi(e.cropmove)&&da(t,ji,e.cropmove),qi(e.cropend)&&da(t,ki,e.cropend),qi(e.crop)&&da(t,Ci,e.crop),qi(e.zoom)&&da(t,Bi,e.zoom),da(i,Si,this.onCropStart),e.zoomable&&e.zoomOnWheel&&da(i,Ei,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&da(i,Mi,this.onDblclick),da(t.ownerDocument,Ni,this.onCropMove),da(t.ownerDocument,Di,this.onCropEnd),e.responsive&&da(window,Li,this.onResize)}},Na={resize:function(){if(!this.disabled){var t,e,i=this.options,a=this.container,n=this.containerData,r=a.offsetWidth/n.width,s=a.offsetHeight/n.height,o=Math.abs(r-1)>Math.abs(s-1)?r:s;if(1!==o)i.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(Ji(t,function(e,i){t[i]=e*o})),this.setCropBoxData(Ji(e,function(t,i){e[i]=t*o})))}},dblclick:function(){var t,e;this.disabled||this.options.dragMode===yi||this.setDragMode((t=this.dragBox,e=ci,(t.classList?t.classList.contains(e):t.className.indexOf(e)>-1)?bi:xi))},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,a=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){e.wheeling=!1},50),t.deltaY?a=t.deltaY>0?1:-1:t.wheelDelta?a=-t.wheelDelta/120:t.detail&&(a=t.detail>0?1:-1),this.zoom(-a*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(Ui(e)&&1!==e||Ui(i)&&0!==i||t.ctrlKey))){var a,n=this.options,r=this.pointers;t.changedTouches?Ji(t.changedTouches,function(t){r[t.identifier]=ba(t)}):r[t.pointerId||0]=ba(t),a=Object.keys(r).length>1&&n.zoomable&&n.zoomOnTouch?ei:oa(t.target,wi),Oi.test(a)&&!1!==ma(this.element,Ti,{originalEvent:t,action:a})&&(t.preventDefault(),this.action=a,this.cropping=!1,a===_e&&(this.cropping=!0,ia(this.dragBox,fi)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var i=this.pointers;t.preventDefault(),!1!==ma(this.element,ji,{originalEvent:t,action:e})&&(t.changedTouches?Ji(t.changedTouches,function(t){Ki(i[t.identifier]||{},ba(t,!0))}):Ki(i[t.pointerId||0]||{},ba(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?Ji(t.changedTouches,function(t){delete i[t.identifier]}):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,na(this.dragBox,fi,this.cropped&&this.options.modal)),ma(this.element,ki,{originalEvent:t,action:e}))}}},Da={change:function(t){var e,i=this.options,a=this.canvasData,n=this.containerData,r=this.cropBoxData,s=this.pointers,o=this.action,h=i.aspectRatio,l=r.left,c=r.top,d=r.width,u=r.height,m=l+d,p=c+u,f=0,g=0,w=n.width,v=n.height,x=!0;!h&&t.shiftKey&&(h=d&&u?d/u:1),this.limited&&(f=r.minLeft,g=r.minTop,w=f+Math.min(n.width,a.width,a.left+a.width),v=g+Math.min(n.height,a.height,a.top+a.height));var b=s[Object.keys(s)[0]],y={x:b.endX-b.startX,y:b.endY-b.startY},C=function(t){switch(t){case ii:m+y.x>w&&(y.x=w-m);break;case ai:l+y.x<f&&(y.x=f-l);break;case ri:c+y.y<g&&(y.y=g-c);break;case ni:p+y.y>v&&(y.y=v-p)}};switch(o){case Qe:l+=y.x,c+=y.y;break;case ii:if(y.x>=0&&(m>=w||h&&(c<=g||p>=v))){x=!1;break}C(ii),(d+=y.x)<0&&(o=ai,l-=d=-d),h&&(u=d/h,c+=(r.height-u)/2);break;case ri:if(y.y<=0&&(c<=g||h&&(l<=f||m>=w))){x=!1;break}C(ri),u-=y.y,c+=y.y,u<0&&(o=ni,c-=u=-u),h&&(d=u*h,l+=(r.width-d)/2);break;case ai:if(y.x<=0&&(l<=f||h&&(c<=g||p>=v))){x=!1;break}C(ai),d-=y.x,l+=y.x,d<0&&(o=ii,l-=d=-d),h&&(u=d/h,c+=(r.height-u)/2);break;case ni:if(y.y>=0&&(p>=v||h&&(l<=f||m>=w))){x=!1;break}C(ni),(u+=y.y)<0&&(o=ri,c-=u=-u),h&&(d=u*h,l+=(r.width-d)/2);break;case si:if(h){if(y.y<=0&&(c<=g||m>=w)){x=!1;break}C(ri),u-=y.y,c+=y.y,d=u*h}else C(ri),C(ii),y.x>=0?m<w?d+=y.x:y.y<=0&&c<=g&&(x=!1):d+=y.x,y.y<=0?c>g&&(u-=y.y,c+=y.y):(u-=y.y,c+=y.y);d<0&&u<0?(o=li,c-=u=-u,l-=d=-d):d<0?(o=oi,l-=d=-d):u<0&&(o=hi,c-=u=-u);break;case oi:if(h){if(y.y<=0&&(c<=g||l<=f)){x=!1;break}C(ri),u-=y.y,c+=y.y,d=u*h,l+=r.width-d}else C(ri),C(ai),y.x<=0?l>f?(d-=y.x,l+=y.x):y.y<=0&&c<=g&&(x=!1):(d-=y.x,l+=y.x),y.y<=0?c>g&&(u-=y.y,c+=y.y):(u-=y.y,c+=y.y);d<0&&u<0?(o=hi,c-=u=-u,l-=d=-d):d<0?(o=si,l-=d=-d):u<0&&(o=li,c-=u=-u);break;case li:if(h){if(y.x<=0&&(l<=f||p>=v)){x=!1;break}C(ai),d-=y.x,l+=y.x,u=d/h}else C(ni),C(ai),y.x<=0?l>f?(d-=y.x,l+=y.x):y.y>=0&&p>=v&&(x=!1):(d-=y.x,l+=y.x),y.y>=0?p<v&&(u+=y.y):u+=y.y;d<0&&u<0?(o=si,c-=u=-u,l-=d=-d):d<0?(o=hi,l-=d=-d):u<0&&(o=oi,c-=u=-u);break;case hi:if(h){if(y.x>=0&&(m>=w||p>=v)){x=!1;break}C(ii),u=(d+=y.x)/h}else C(ni),C(ii),y.x>=0?m<w?d+=y.x:y.y>=0&&p>=v&&(x=!1):d+=y.x,y.y>=0?p<v&&(u+=y.y):u+=y.y;d<0&&u<0?(o=oi,c-=u=-u,l-=d=-d):d<0?(o=li,l-=d=-d):u<0&&(o=si,c-=u=-u);break;case ti:this.move(y.x,y.y),x=!1;break;case ei:this.zoom(function(t){var e=Fe({},t),i=0;return Ji(t,function(t,a){delete e[a],Ji(e,function(e){var a=Math.abs(t.startX-e.startX),n=Math.abs(t.startY-e.startY),r=Math.abs(t.endX-e.endX),s=Math.abs(t.endY-e.endY),o=Math.sqrt(a*a+n*n),h=(Math.sqrt(r*r+s*s)-o)/o;Math.abs(h)>Math.abs(i)&&(i=h)})}),i}(s),t),x=!1;break;case _e:if(!y.x||!y.y){x=!1;break}e=pa(this.cropper),l=b.startX-e.left,c=b.startY-e.top,d=r.minWidth,u=r.minHeight,y.x>0?o=y.y>0?hi:si:y.x<0&&(l-=d,o=y.y>0?li:oi),y.y<0&&(c-=u),this.cropped||(aa(this.cropBox,ui),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}x&&(r.width=d,r.height=u,r.left=l,r.top=c,this.action=o,this.renderCropBox()),Ji(s,function(t){t.startX=t.endX,t.startY=t.endY})}},za={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&ia(this.dragBox,fi),aa(this.cropBox,ui),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Ki({},this.initialImageData),this.canvasData=Ki({},this.initialCanvasData),this.cropBoxData=Ki({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(Ki(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),aa(this.dragBox,fi),ia(this.cropBox,ui)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,Ji(this.previews,function(e){e.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,aa(this.cropper,di)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,ia(this.cropper,di)),this},destroy:function(){var t=this.element;return t[Ke]?(t[Ke]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,a=i.left,n=i.top;return this.moveTo(Vi(t)?t:a+Number(t),Vi(e)?e:n+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,a=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(Ui(t)&&(i.left=t,a=!0),Ui(e)&&(i.top=e,a=!0),a&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var a=this.options,n=this.canvasData,r=n.width,s=n.height,o=n.naturalWidth,h=n.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&a.zoomable){var l=o*t,c=h*t;if(!1===ma(this.element,Bi,{ratio:t,oldRatio:r/o,originalEvent:i}))return this;if(i){var d=this.pointers,u=pa(this.cropper),m=d&&Object.keys(d).length?function(t){var e=0,i=0,a=0;return Ji(t,function(t){var n=t.startX,r=t.startY;e+=n,i+=r,a+=1}),{pageX:e/=a,pageY:i/=a}}(d):{pageX:i.pageX,pageY:i.pageY};n.left-=(l-r)*((m.pageX-u.left-n.left)/r),n.top-=(c-s)*((m.pageY-u.top-n.top)/s)}else $i(e)&&Ui(e.x)&&Ui(e.y)?(n.left-=(l-r)*((e.x-n.left)/r),n.top-=(c-s)*((e.y-n.top)/s)):(n.left-=(l-r)/2,n.top-=(c-s)/2);n.width=l,n.height=c,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return Ui(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,Ui(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(Ui(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData,a=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(Ui(t)&&(i.scaleX=t,a=!0),Ui(e)&&(i.scaleY=e,a=!0),a&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,a=this.imageData,n=this.canvasData,r=this.cropBoxData;if(this.ready&&this.cropped){t={x:r.left-n.left,y:r.top-n.top,width:r.width,height:r.height};var s=a.width/a.naturalWidth;if(Ji(t,function(e,i){t[i]=e/s}),e){var o=Math.round(t.y+t.height),h=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=h-t.x,t.height=o-t.y}}else t={x:0,y:0,width:0,height:0};return i.rotatable&&(t.rotate=a.rotate||0),i.scalable&&(t.scaleX=a.scaleX||1,t.scaleY=a.scaleY||1),t},setData:function(t){var e=this.options,i=this.imageData,a=this.canvasData,n={};if(this.ready&&!this.disabled&&$i(t)){var r=!1;e.rotatable&&Ui(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,r=!0),e.scalable&&(Ui(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,r=!0),Ui(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,r=!0)),r&&this.renderCanvas(!0,!0);var s=i.width/i.naturalWidth;Ui(t.x)&&(n.left=t.x*s+a.left),Ui(t.y)&&(n.top=t.y*s+a.top),Ui(t.width)&&(n.width=t.width*s),Ui(t.height)&&(n.height=t.height*s),this.setCropBoxData(n)}return this},getContainerData:function(){return this.ready?Ki({},this.containerData):{}},getImageData:function(){return this.sized?Ki({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&Ji(["left","top","width","height","naturalWidth","naturalHeight"],function(i){e[i]=t[i]}),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&$i(t)&&(Ui(t.left)&&(e.left=t.left),Ui(t.top)&&(e.top=t.top),Ui(t.width)?(e.width=t.width,e.height=t.width/i):Ui(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,i,a=this.cropBoxData,n=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&$i(t)&&(Ui(t.left)&&(a.left=t.left),Ui(t.top)&&(a.top=t.top),Ui(t.width)&&t.width!==a.width&&(e=!0,a.width=t.width),Ui(t.height)&&t.height!==a.height&&(i=!0,a.height=t.height),n&&(e?a.height=a.width/n:i&&(a.width=a.height*n)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=function(t,e,i,a){var n=e.aspectRatio,r=e.naturalWidth,s=e.naturalHeight,o=e.rotate,h=void 0===o?0:o,l=e.scaleX,c=void 0===l?1:l,d=e.scaleY,u=void 0===d?1:d,m=i.aspectRatio,p=i.naturalWidth,f=i.naturalHeight,g=a.fillColor,w=void 0===g?"transparent":g,v=a.imageSmoothingEnabled,x=void 0===v||v,b=a.imageSmoothingQuality,y=void 0===b?"low":b,C=a.maxWidth,k=void 0===C?1/0:C,j=a.maxHeight,T=void 0===j?1/0:j,M=a.minWidth,S=void 0===M?0:M,N=a.minHeight,D=void 0===N?0:N,z=document.createElement("canvas"),L=z.getContext("2d"),E=ya({aspectRatio:m,width:k,height:T}),B=ya({aspectRatio:m,width:S,height:D},"cover"),W=Math.min(E.width,Math.max(B.width,p)),O=Math.min(E.height,Math.max(B.height,f)),A=ya({aspectRatio:n,width:k,height:T}),R=ya({aspectRatio:n,width:S,height:D},"cover"),I=Math.min(A.width,Math.max(R.width,r)),P=Math.min(A.height,Math.max(R.height,s)),F=[-I/2,-P/2,I,P];return z.width=_i(W),z.height=_i(O),L.fillStyle=w,L.fillRect(0,0,W,O),L.save(),L.translate(W/2,O/2),L.rotate(h*Math.PI/180),L.scale(c,u),L.imageSmoothingEnabled=x,L.imageSmoothingQuality=y,L.drawImage.apply(L,[t].concat(Xe(F.map(function(t){return Math.floor(_i(t))})))),L.restore(),z}(this.image,this.imageData,e,t);if(!this.cropped)return i;var a=this.getData(t.rounded),n=a.x,r=a.y,s=a.width,o=a.height,h=i.width/Math.floor(e.naturalWidth);1!==h&&(n*=h,r*=h,s*=h,o*=h);var l=s/o,c=ya({aspectRatio:l,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),d=ya({aspectRatio:l,width:t.minWidth||0,height:t.minHeight||0},"cover"),u=ya({aspectRatio:l,width:t.width||(1!==h?i.width:s),height:t.height||(1!==h?i.height:o)}),m=u.width,p=u.height;m=Math.min(c.width,Math.max(d.width,m)),p=Math.min(c.height,Math.max(d.height,p));var f=document.createElement("canvas"),g=f.getContext("2d");f.width=_i(m),f.height=_i(p),g.fillStyle=t.fillColor||"transparent",g.fillRect(0,0,m,p);var w=t.imageSmoothingEnabled,v=void 0===w||w,x=t.imageSmoothingQuality;g.imageSmoothingEnabled=v,x&&(g.imageSmoothingQuality=x);var b,y,C,k,j,T,M=i.width,S=i.height,N=n,D=r;N<=-s||N>M?(N=0,b=0,C=0,j=0):N<=0?(C=-N,N=0,j=b=Math.min(M,s+N)):N<=M&&(C=0,j=b=Math.min(s,M-N)),b<=0||D<=-o||D>S?(D=0,y=0,k=0,T=0):D<=0?(k=-D,D=0,T=y=Math.min(S,o+D)):D<=S&&(k=0,T=y=Math.min(o,S-D));var z=[N,D,b,y];if(j>0&&T>0){var L=m/s;z.push(C*L,k*L,j*L,T*L)}return g.drawImage.apply(g,[i].concat(Xe(z.map(function(t){return Math.floor(_i(t))})))),f},setAspectRatio:function(t){var e=this.options;return this.disabled||Vi(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,i=this.dragBox,a=this.face;if(this.ready&&!this.disabled){var n=t===xi,r=e.movable&&t===bi;t=n||r?t:yi,e.dragMode=t,ha(i,wi,t),na(i,ci,n),na(i,gi,r),e.cropBoxMovable||(ha(a,wi,t),na(a,ci,n),na(a,gi,r))}return this}},La=Ge.Cropper,Ea=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e||!Ii.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=Ki({},Pi,$i(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return e=t,i=[{key:"init",value:function(){var t,e=this.element,i=e.tagName.toLowerCase();if(!e[Ke]){if(e[Ke]=this,"img"===i){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===i&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var i=this.element,a=this.options;if(a.rotatable||a.scalable||(a.checkOrientation=!1),a.checkOrientation&&window.ArrayBuffer)if(Ai.test(t))Ri.test(t)?this.read((n=t.replace(ka,""),r=atob(n),s=new ArrayBuffer(r.length),Ji(o=new Uint8Array(s),function(t,e){o[e]=r.charCodeAt(e)}),s)):this.clone();else{var n,r,s,o,h=new XMLHttpRequest,l=this.clone.bind(this);this.reloading=!0,this.xhr=h,h.onabort=l,h.onerror=l,h.ontimeout=l,h.onprogress=function(){h.getResponseHeader("content-type")!==Wi&&h.abort()},h.onload=function(){e.read(h.response)},h.onloadend=function(){e.reloading=!1,e.xhr=null},a.checkCrossOrigin&&wa(t)&&i.crossOrigin&&(t=va(t)),h.open("GET",t,!0),h.responseType="arraybuffer",h.withCredentials="use-credentials"===i.crossOrigin,h.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,i=this.imageData,a=ja(t),n=0,r=1,s=1;if(a>1){this.url=function(t,e){for(var i=[],a=new Uint8Array(t);a.length>0;)i.push(Ca.apply(null,Zi(a.subarray(0,8192)))),a=a.subarray(8192);return"data:".concat(e,";base64,").concat(btoa(i.join("")))}(t,Wi);var o=function(t){var e=0,i=1,a=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:a=-1;break;case 5:e=90,a=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90}return{rotate:e,scaleX:i,scaleY:a}}(a);n=o.rotate,r=o.scaleX,s=o.scaleY}e.rotatable&&(i.rotate=n),e.scalable&&(i.scaleX=r,i.scaleY=s),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,i=t.crossOrigin,a=e;this.options.checkCrossOrigin&&wa(e)&&(i||(i="anonymous"),a=va(e)),this.crossOrigin=i,this.crossOriginUrl=a;var n=document.createElement("img");i&&(n.crossOrigin=i),n.src=a||e,n.alt=t.alt||"The image to crop",this.image=n,n.onload=this.start.bind(this),n.onerror=this.stop.bind(this),ia(n,mi),t.parentNode.insertBefore(n,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var i=Ge.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Ge.navigator.userAgent),a=function(e,i){Ki(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),t.initialImageData=Ki({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||i){var n=document.createElement("img"),r=document.body||document.documentElement;this.sizingImage=n,n.onload=function(){a(n.width,n.height),i||r.removeChild(n)},n.src=e.src,i||(n.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",r.appendChild(n))}else a(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,i=this.image,a=t.parentNode,n=document.createElement("div");n.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var r=n.querySelector(".".concat(Ke,"-container")),s=r.querySelector(".".concat(Ke,"-canvas")),o=r.querySelector(".".concat(Ke,"-drag-box")),h=r.querySelector(".".concat(Ke,"-crop-box")),l=h.querySelector(".".concat(Ke,"-face"));this.container=a,this.cropper=r,this.canvas=s,this.dragBox=o,this.cropBox=h,this.viewBox=r.querySelector(".".concat(Ke,"-view-box")),this.face=l,s.appendChild(i),ia(t,ui),a.insertBefore(r,t.nextSibling),aa(i,mi),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,ia(h,ui),e.guides||ia(h.getElementsByClassName("".concat(Ke,"-dashed")),ui),e.center||ia(h.getElementsByClassName("".concat(Ke,"-center")),ui),e.background&&ia(r,"".concat(Ke,"-bg")),e.highlight||ia(l,pi),e.cropBoxMovable&&(ia(l,gi),ha(l,wi,Qe)),e.cropBoxResizable||(ia(h.getElementsByClassName("".concat(Ke,"-line")),ui),ia(h.getElementsByClassName("".concat(Ke,"-point")),ui)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),qi(e.ready)&&ua(t,zi,e.ready,{once:!0}),ma(t,zi)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),aa(this.element,ui)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],a=[{key:"noConflict",value:function(){return window.Cropper=La,t}},{key:"setDefaults",value:function(t){Ki(Pi,$i(t)&&t)}}],i&&Ve(e.prototype,i),a&&Ve(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,a}();Ki(Ea.prototype,Ta,Ma,Sa,Na,Da,za);var Ba=function(){return Ba=Object.assign||function(t){for(var e,i=1,a=arguments.length;i<a;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Ba.apply(this,arguments)};function Wa(t,e){var i={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(i[a]=t[a]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(t);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(i[a[n]]=t[a[n]])}return i}var Oa=["aspectRatio","autoCrop","autoCropArea","background","center","checkCrossOrigin","checkOrientation","cropBoxMovable","cropBoxResizable","data","dragMode","guides","highlight","initialAspectRatio","minCanvasHeight","minCanvasWidth","minContainerHeight","minContainerWidth","minCropBoxHeight","minCropBoxWidth","modal","movable","preview","responsive","restore","rotatable","scalable","toggleDragModeOnDblclick","viewMode","wheelZoomRatio","zoomOnTouch","zoomOnWheel","zoomable","cropstart","cropmove","cropend","crop","zoom","ready"],Aa={opacity:0,maxWidth:"100%"},Ra=i.forwardRef(function(e,a){var n=Wa(e,[]),r=n.dragMode,s=void 0===r?"crop":r,o=n.src,h=n.style,l=n.className,c=n.crossOrigin,d=n.scaleX,u=n.scaleY,m=n.enable,p=n.zoomTo,f=n.rotateTo,g=n.alt,w=void 0===g?"picture":g,v=n.ready,x=n.onInitialized,b=Wa(n,["dragMode","src","style","className","crossOrigin","scaleX","scaleY","enable","zoomTo","rotateTo","alt","ready","onInitialized"]),y={scaleY:u,scaleX:d,enable:m,zoomTo:p,rotateTo:f},C=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];var n=t.useRef(null);return i.useEffect(function(){e.forEach(function(t){t&&("function"==typeof t?t(n.current):t.current=n.current)})},[e]),n}(a,t.useRef(null));t.useEffect(function(){var t;(null===(t=C.current)||void 0===t?void 0:t.cropper)&&"number"==typeof p&&C.current.cropper.zoomTo(p)},[n.zoomTo]),t.useEffect(function(){var t;(null===(t=C.current)||void 0===t?void 0:t.cropper)&&void 0!==o&&C.current.cropper.reset().clear().replace(o)},[o]),t.useEffect(function(){if(null!==C.current){var t=new Ea(C.current,Ba(Ba({dragMode:s},b),{ready:function(t){null!==t.currentTarget&&function(t,e){void 0===e&&(e={});var i=e.enable,a=void 0===i||i,n=e.scaleX,r=void 0===n?1:n,s=e.scaleY,o=void 0===s?1:s,h=e.zoomTo,l=void 0===h?0:h,c=e.rotateTo;a?t.enable():t.disable(),t.scaleX(r),t.scaleY(o),void 0!==c&&t.rotateTo(c),l>0&&t.zoomTo(l)}(t.currentTarget.cropper,y),v&&v(t)}}));x&&x(t)}return function(){var t,e;null===(e=null===(t=C.current)||void 0===t?void 0:t.cropper)||void 0===e||e.destroy()}},[C]);var k=function(t){return Oa.reduce(function(t,e){var i=t,a=e;return i[a],Wa(i,["symbol"==typeof a?a:a+""])},t)}(Ba(Ba({},b),{crossOrigin:c,src:o,alt:w}));return i.createElement("div",{style:h,className:l},i.createElement("img",Ba({},k,{style:Aa,ref:C})))});const Ia=({defaultSrc:i,onCropComplete:a,onClose:n})=>{const[r,s]=t.useState(i),[o,h]=t.useState("#"),l=t.createRef();return e.jsxs("div",{children:[e.jsxs("div",{style:{width:"100%"},children:[e.jsx("input",{type:"file",onChange:t=>{let e;t.preventDefault(),t.dataTransfer?e=t.dataTransfer.files:t.target&&(e=t.target.files);const i=new FileReader;i.onload=()=>{s(i.result)},i.readAsDataURL(e[0])}}),e.jsx("button",{onClick:()=>s(i),children:"Use current frame"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(Ra,{ref:l,style:{height:400,width:"100%"},zoomTo:.5,initialAspectRatio:1,preview:".img-preview",src:r,viewMode:1,minCropBoxHeight:10,minCropBoxWidth:10,background:!1,responsive:!0,autoCropArea:1,checkOrientation:!1,guides:!0})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"box",style:{width:"50%",float:"right"},children:[e.jsx("h1",{children:"Preview"}),e.jsx("div",{className:"img-preview",style:{width:"100%",float:"left",height:"300px"}})]}),e.jsxs("div",{className:"box",style:{width:"50%",float:"right",height:"300px"},children:[e.jsxs("h1",{children:[e.jsx("span",{children:"Crop"}),e.jsx("button",{style:{float:"right"},onClick:()=>{if(void 0!==l.current?.cropper){const t=l.current?.cropper.getCroppedCanvas().toDataURL();h(t),a&&a({croppedDataUrl:t,w:l.current?.cropper.getCroppedCanvas().width,h:l.current?.cropper.getCroppedCanvas().height})}},children:"Apply Crop"})]}),e.jsx("img",{style:{width:"100%"},src:o,alt:"cropped"})]})]}),e.jsx("br",{style:{clear:"both"}}),n&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:n,children:"Done"})})]})},Pa=()=>{const[i,a]=t.useState(!1),[n,s]=t.useState(!1),[o,h]=t.useState(!1),[l,c]=t.useState(!0),[d,u]=t.useState(!1),[m,p]=t.useState(!1),[f,g]=t.useState(!1),[w,v]=t.useState(64),[x,b]=t.useState(64),[y,C]=t.useState(!1),[k,j]=t.useState("#000000"),[T,M]=t.useState(8),[S,N]=t.useState([]),[D,z]=t.useState([]),[L,E]=t.useState(0),[B,W]=t.useState(!1),[O,A]=t.useState(!0),[R,I]=t.useState(!1),[P,F]=t.useState(5),U=t.useRef(null);t.useEffect(()=>{const t=setTimeout(()=>{r(),setTimeout(()=>{if(window.drawingCanvas){const t=window.drawingCanvas.toDataURL(),e=$();e&&e.length>0?N(e):N([t])}},50)},100);return()=>clearTimeout(t)},[]),t.useEffect(()=>{window.selectedColor=k,window.brushSize=T,window.isEraser=B},[k,T,B]),t.useEffect(()=>{if(S.length>0&&L>=0&&L<S.length){const t=S[L];if(t&&""!==t)Y(t);else if(window.drawingCanvas){const t=window.drawingCanvas,e=t.getContext("2d");e&&(e.fillStyle="white",e.fillRect(0,0,t.width,t.height))}}},[L,S]),t.useEffect(()=>{O&&S.length>0&&X(S)},[S,O]),t.useEffect(()=>()=>{U.current&&clearInterval(U.current)},[]);const H=t=>{if(window.drawingCanvas){const e=window.drawingCanvas,i=e.getContext("2d");if(!i)return;switch(i.fillStyle="white",i.fillRect(0,0,e.width,e.height),i.fillStyle=k,i.strokeStyle=k,i.lineWidth=T,t){case"circle":i.beginPath(),i.arc(e.width/2,e.height/2,50,0,2*Math.PI),i.fill();break;case"square":i.fillRect(e.width/2-50,e.height/2-50,100,100);break;case"smiley":i.beginPath(),i.arc(e.width/2,e.height/2,60,0,2*Math.PI),i.stroke(),i.beginPath(),i.arc(e.width/2-20,e.height/2-20,8,0,2*Math.PI),i.fill(),i.beginPath(),i.arc(e.width/2+20,e.height/2-20,8,0,2*Math.PI),i.fill(),i.beginPath(),i.arc(e.width/2,e.height/2,30,0,Math.PI,!1),i.stroke()}}},V=()=>window.getDrawingCanvasData?window.getDrawingCanvasData():"",Y=t=>{window.setDrawingCanvasData&&t&&window.setDrawingCanvasData(t)},X=t=>{if(O)try{localStorage.setItem("animationFrames",JSON.stringify(t))}catch(e){}},$=()=>{try{const t=localStorage.getItem("animationFrames");return t?JSON.parse(t):null}catch(t){return null}},q=t=>{if(t<0||t>=S.length)return;const e=[...S];e[L]=V(),N(e),E(t),O&&X(e)};return e.jsxs("div",{className:"fixed inset-0 bg-gray-900 overflow-hidden",children:[e.jsx("canvas",{id:"canvas"}),i&&e.jsxs("div",{className:"fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 p-4 rounded-lg shadow-lg z-60",children:[e.jsx("div",{className:"grid grid-cols-6 gap-2 mb-3",children:["#000000","#FFFFFF","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#FFC0CB","#A52A2A"].map(t=>e.jsx("button",{className:`w-8 h-8 rounded-full border-2 ${k===t?"border-white":"border-gray-600"} focus:outline-none`,style:{backgroundColor:t},onClick:()=>j(t),"aria-label":`Select ${t} color`},t))}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("label",{htmlFor:"brushSize",className:"text-white text-sm",children:"Size:"}),e.jsx("input",{id:"brushSize",type:"range",min:"1",max:"20",value:T,onChange:t=>M(parseInt(t.target.value)),className:"w-32 accent-white"}),e.jsxs("span",{className:"text-white text-sm w-8",children:[T,"px"]})]})]}),e.jsx("button",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-700 hover:bg-gray-600 text-white p-3 rounded-full shadow-lg z-60 -translate-x-16",onClick:()=>{a(!i),n&&s(!1)},"aria-label":i?"Hide color palette":"Show color palette",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),e.jsx("button",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-700 hover:bg-gray-600 text-white p-3 rounded-full shadow-lg z-60 translate-x-0",onClick:()=>{c(!l),a(!1)},"aria-label":"Frame manager",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),e.jsx("button",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-700 hover:bg-gray-600 text-white p-3 rounded-full shadow-lg z-60 translate-x-16",onClick:()=>{s(!n),i&&a(!1)},"aria-label":n?"Hide examples":"Show examples",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),n&&e.jsxs("div",{className:"fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 p-4 rounded-lg shadow-lg z-60",children:[e.jsx("h3",{className:"text-white mb-2",children:"Examples"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded",onClick:()=>{H("circle"),s(!1)},children:"Circle"}),e.jsx("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded",onClick:()=>{H("square"),s(!1)},children:"Square"}),e.jsx("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded",onClick:()=>{H("smiley"),s(!1)},children:"Smiley"})]})]}),l&&e.jsxs("div",{className:"fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 p-4 rounded-lg shadow-lg z-50 w-full max-w-4xl",children:[e.jsx("div",{className:"flex justify-between items-center mb-3",children:e.jsx("h3",{className:"text-white font-bold",children:"Frame Manager"})}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("div",{className:"flex space-x-2 justify-center",children:[e.jsx("button",{className:"bg-blue-500 hover:bg-blue-600 text-white p-2 rounded",onClick:()=>{const t=[...S];t[L]=V(),N(t);const e=[...t];e.splice(L+1,0,""),N(e),E(L+1),O&&X(e)},"aria-label":"Add frame",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("button",{className:"bg-purple-500 hover:bg-purple-600 text-white p-2 rounded",onClick:()=>{if(0===S.length)return;const t=[...S];t[L]=V(),N(t);const e=t[L],i=[...t];i.splice(L+1,0,e),N(i),E(L+1),O&&X(i)},"aria-label":"Duplicate frame",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),e.jsx("button",{className:"bg-red-500 hover:bg-red-600 text-white p-2 rounded",onClick:()=>{if(window.confirm("Are you sure you want to clear the current canvas? This action cannot be undone.")&&window.drawingCanvas){const t=window.drawingCanvas,e=t.getContext("2d");if(e){e.fillStyle="white",e.fillRect(0,0,t.width,t.height);const i=[...S];i[L]=t.toDataURL(),N(i),O&&X(i)}}},"aria-label":"Clear canvas",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsx("button",{className:"bg-teal-500 hover:bg-teal-600 text-white p-2 rounded",onClick:()=>{const t=V();if(!t)return void alert("No frame data to save");const e=document.createElement("a");e.href=t,e.download=`frame_${L+1}.png`,document.body.appendChild(e),e.click(),document.body.removeChild(e)},"aria-label":"Save current frame",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})})}),e.jsx("button",{className:"bg-yellow-500 hover:bg-yellow-600 text-white p-2 rounded",onClick:()=>{R?(U.current&&(clearInterval(U.current),U.current=null),I(!1)):(L===S.length-1&&q(0),(()=>{if(S.length<=1)return;I(!0),U.current&&clearInterval(U.current);const t=Math.max(10,1e3/P);U.current=setInterval(()=>{E(t=>(t+1)%S.length)},t)})())},"aria-label":R?"Pause animation":"Play animation",children:R?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700 p-2 rounded",children:[e.jsx("label",{htmlFor:"fps-control",className:"text-white text-sm",children:"FPS:"}),e.jsxs("select",{id:"fps-control",value:P,onChange:t=>F(parseInt(t.target.value)),className:"bg-gray-600 text-white text-sm rounded px-1",disabled:R,children:[e.jsx("option",{value:"1",children:"1"}),e.jsx("option",{value:"5",children:"5"}),P>1&&P<10&&5!==P&&e.jsx("option",{value:P,children:P}),e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"15",children:"15"}),e.jsx("option",{value:"24",children:"24"}),e.jsx("option",{value:"30",children:"30"})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 justify-center max-h-24 overflow-y-auto",children:S.map((t,i)=>e.jsx("button",{className:"w-10 h-10 rounded "+(i===L?"ring-2 ring-blue-400":""),onClick:()=>q(i),"aria-label":`Go to frame ${i+1}`,children:e.jsx("div",{className:"w-full h-full bg-gray-200 border border-gray-400 rounded flex items-center justify-center text-xs",children:i+1})},i))}),e.jsxs("div",{className:"flex items-center justify-between text-white text-sm text-center",children:[e.jsxs("div",{children:["Frame: ",L+1,"/",S.length]}),e.jsx("button",{className:"bg-gray-600 hover:bg-gray-500 text-white p-2 rounded",onClick:()=>{if(S.length<=1)return;if(!window.confirm("Are you sure you want to delete this frame? This action cannot be undone."))return;const t=[...S];t[L]=V();const e=t.filter((t,e)=>e!==L);N(e);const i=Math.min(L,e.length-1);E(i),O&&X(e)},"aria-label":"Delete frame",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]}),o&&e.jsxs("div",{className:"fixed bottom-20 left-1/3 transform -translate-x-1/3 bg-gray-800 p-4 rounded-lg shadow-lg z-60",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-white font-bold",children:"Settings"}),e.jsx("button",{className:"text-white hover:text-gray-300",onClick:()=>h(!1),"aria-label":"Close settings",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-white",children:"Autosave to localStorage"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:O,onChange:t=>A(t.target.checked)}),e.jsx("div",{className:`w-11 h-6 rounded-full peer ${O?"bg-blue-600":"bg-gray-700"} peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all`})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-white",children:"LOAD FRAMES"}),e.jsx("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white p-2 rounded",onClick:()=>{h(!1),u(!0)},"aria-label":"Load frames",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-white",children:"Save as MP4"}),e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded",onClick:async()=>{if(0!==S.length){if(window.confirm("Are you sure you want to export this animation as a MP4? This may take a moment."))try{let t=[];for(let e=0;e<S.length;e++){const i=S[e];if(i&&t.push(i),i){const t=i.split(",")[1],e=atob(t),a=new Uint8Array(e.length);for(let i=0;i<e.length;i++)a[i]=e.charCodeAt(i)}}t.length&&z(S.filter(Boolean));S.map((t,e)=>`file 'frame${e.toString().padStart(3,"0")}.png'`).join("\n")}catch(t){}}else alert("No frames to export")},"aria-label":"Export as MP4",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white",children:"New Project"}),e.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white p-2 rounded",onClick:()=>{if(window.confirm("Are you sure you want to start a new project? This will delete all frames and cannot be undone.")&&window.drawingCanvas){const t=window.drawingCanvas,e=t.getContext("2d");if(e){e.fillStyle="white",e.fillRect(0,0,t.width,t.height);const i=t.toDataURL();N([i]),E(0),O&&X([i])}}},"aria-label":"Start new project",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-white",children:"Custom FPS"}),e.jsx("button",{className:"bg-purple-600 hover:bg-purple-700 text-white p-2 rounded",onClick:()=>p(!0),"aria-label":"Set custom FPS",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-white",children:"Load Grid (in dev)"}),e.jsx("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white p-2 rounded",onClick:()=>g(!0),"aria-label":"Load frames from grid",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-white",children:"Crop Image (in dev)"}),e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded",onClick:()=>C(!0),"aria-label":"Crop image",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})]}),m&&e.jsxs("div",{className:"fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 p-4 rounded-lg shadow-lg z-70",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-white font-bold",children:"Set Custom FPS"}),e.jsx("button",{className:"text-white hover:text-gray-300",onClick:()=>p(!1),"aria-label":"Close custom FPS",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[1,2,3,4,5,6,7,8,9].map(t=>e.jsx("button",{className:"bg-blue-500 hover:bg-blue-600 text-white p-3 rounded text-lg font-bold",onClick:()=>{F(t),p(!1),h(!1)},"aria-label":`Set FPS to ${t}`,children:t},t))})]}),f&&e.jsxs("div",{className:"fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 p-4 rounded-lg shadow-lg z-70 w-96",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-white font-bold",children:"Load Frames from Grid"}),e.jsx("button",{className:"text-white hover:text-gray-300",onClick:()=>g(!1),"aria-label":"Close load grid",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-white mb-1",children:"Cell Width (px):"}),e.jsx("input",{type:"number",min:"1",value:w,onChange:t=>v(parseInt(t.target.value)||1),className:"w-full bg-gray-700 text-white p-2 rounded"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-white mb-1",children:"Cell Height (px):"}),e.jsx("input",{type:"number",min:"1",value:x,onChange:t=>b(parseInt(t.target.value)||1),className:"w-full bg-gray-700 text-white p-2 rounded"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-white mb-1",children:"Select Grid Image:"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>{const e=t.target.files?.[0];if(!e)return;const i=new FileReader;i.onload=t=>{const e=new Image;e.onload=()=>{if(!window.confirm(`Are you sure you want to load frames from this image? This will replace all current frames (${S.length} frames will be deleted).`))return void g(!1);const t=document.createElement("canvas"),i=t.getContext("2d");if(!i)return alert("Could not create canvas context"),void g(!1);const a=Math.floor(e.width/w),n=Math.floor(e.height/x);if(a<=0||n<=0)return alert("Cell size is too large for the image or invalid dimensions"),void g(!1);const r=[];for(let s=0;s<n;s++)for(let n=0;n<a;n++){t.width=w,t.height=x,i.drawImage(e,n*w,s*x,w,x,0,0,w,x);const a=t.toDataURL("image/png");r.push(a)}N(r),E(0),g(!1),O&&X(r)},e.src=t.target?.result},i.readAsDataURL(e)},className:"w-full text-white"})]}),e.jsx("div",{className:"flex justify-end space-x-2",children:e.jsx("button",{className:"bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded",onClick:()=>g(!1),children:"Cancel"})})]}),y&&e.jsxs("div",{className:"fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 p-4 rounded-lg shadow-lg z-70 w-full max-w-4xl h-3/4 max-h-[80vh] overflow-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-white font-bold",children:"Crop Image"}),e.jsx("button",{className:"text-white hover:text-gray-300",onClick:()=>C(!1),"aria-label":"Close crop",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsx("div",{className:"h-[70vh]",children:e.jsx(Ia,{defaultSrc:S[L]||"",onCropComplete:t=>{v(t.w),b(t.h)},onClose:()=>C(!1)})})]}),e.jsx("button",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-700 hover:bg-gray-600 text-white p-3 rounded-full shadow-lg z-60 -translate-x-32",onClick:()=>{h(!o)},"aria-label":o?"Hide settings":"Show settings",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("button",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-700 hover:bg-gray-600 text-white p-3 rounded-full shadow-lg z-60 translate-x-32 "+(B?"ring-2 ring-yellow-400":""),onClick:()=>W(!B),"aria-label":B?"Switch to drawing mode":"Switch to eraser mode",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),!!D.length&&e.jsx(Re,{frames:D,fps:P,width:512,height:512,clearFrames:()=>z([])}),e.jsx(Ie,{isOpen:d,onClose:()=>u(!1),onLoadFrames:t=>{if(S.length>0){const t=[...S];t[L]=V(),N(t)}N(t),E(0),t.length>0&&Y(t[0]),O&&X(t)},currentFrameCount:S.length})]})};export{Pa as default};
